import n,{useEffect as e,useState as t,useRef as r}from"react";import i from"prop-types";import a,{EASE_IN_OUT as o}from"scenejs";function l(e,n){var t,r=Object.keys(e);return Object.getOwnPropertySymbols&&(t=Object.getOwnPropertySymbols(e),n&&(t=t.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,t)),r}function s(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?l(Object(t),!0).forEach(function(n){c(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):l(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}function c(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function p(n,e){return function(n){if(Array.isArray(n))return n}(n)||function(n,e){var t=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null!=t){var r,i,a=[],o=!0,l=!1;try{for(t=t.call(n);!(o=(r=t.next()).done)&&(a.push(r.value),!e||a.length!==e);o=!0);}catch(n){l=!0,i=n}finally{try{o||null==t.return||t.return()}finally{if(l)throw i}}return a}}(n,e)||function(n,e){var t;if(n)return"string"==typeof n?d(n,e):"Map"===(t="Object"===(t=Object.prototype.toString.call(n).slice(8,-1))&&n.constructor?n.constructor.name:t)||"Set"===t?Array.from(n):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?d(n,e):void 0}(n,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(n,e){(null==e||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}!function(n,e){var t,r,e=(e=void 0===e?{}:e).insertAt;"undefined"!=typeof document&&(t=document.head||document.getElementsByTagName("head")[0],(r=document.createElement("style")).type="text/css","top"===e&&t.firstChild?t.insertBefore(r,t.firstChild):t.appendChild(r),r.styleSheet?r.styleSheet.cssText=n:r.appendChild(document.createTextNode(n)))}("\n:root {\n  --background: #fff;\n  --font-color: #494949;\n}\n\n#canvasContainer {\n  min-width: 100%;\n  min-height: 100%;\n}\n\n.Canvas {\n  font-size: 14px;\n  margin: auto;\n  flex-shrink: 0;\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n  align-items: center;\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  height: 100%;\n  width: 100%;\n  background: #ebecf0;\n}\n\n.CanvasInner {\n  grid-area: canvas;\n  position: relative;\n  z-index: 0;\n  padding: 10px;\n}\n\n.Composition {\n  position: relative;\n  left: 50%;\n  top: 50%;\n  transform: translate(-50%, -50%);\n  transform-origin: center center;\n  -webkit-box-shadow: 0 1px 6px 0 rgb(32 33 36 / 28%);\n  -moz-box-shadow: 0 1px 6px 0 rgb(32 33 36 / 28%);\n  box-shadow: 0 1px 6px 0 rgb(32 33 36 / 28%);\n  overflow: hidden;\n}\n\n.Layers {\n  pointer-events: none;\n  background: white;\n}\n\n/*Player*/\n\n.playerWrapper {\n  position: absolute;\n  bottom: 20px;\n  margin: 0;\n  left: 0;\n  right: 0;\n  z-index: 99999999999;\n  display: flex;\n  justify-content: center;\n}\n\n.player {\n  position: relative;\n  align-items: center;\n  display: flex;\n}\n\n.circles .circle {\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  width: 200px;\n  height: 200px;\n  border: 100px solid black;\n  border-radius: 50%;\n  transform: translate(-50%, -50%);\n}\n\n.player .play, .player .pause, .player .progress {\n  display: inline-block;\n  vertical-align: middle;\n}\n\n.player .play {\n  border-left: 14px solid #333;\n  border-top: 8px solid transparent;\n  border-bottom: 8px solid transparent;\n}\n\n.player .pause {\n  border-left: 4px solid #333;\n  border-right: 4px solid #333;\n  width: 14px;\n  height: 16px;\n  box-sizing: border-box;\n}\n\n.player input[type=range] {\n  flex: auto;\n}\n\n.player input[type=range] {\n  -webkit-appearance: none;\n  background: rgba(0, 0, 0, 0.2);\n  height: 3px;\n  margin-left: 10px;\n}\n\n.player input[type=range]::-webkit-slider-thumb {\n  -webkit-appearance: none;\n  width: 14px;\n  height: 14px;\n  border-radius: 7px;\n  background: #333;\n}\n\n.player input[type=range]:focus {\n  outline: none;\n}\n");var u=new a({},{easing:o,iterationCount:1,selector:!0}).setTime(0),h=function(t){var r=t.children,i=t.name,a=t.id,o=t.ratio,l=t.keyframes,c=t.style,p=t.playSpeed,d=t.delay,h=t.iteration,y=i.replaceAll(" ","_")+a;return e(function(){u.newItem(".Layer-".concat(y),{selector:!0,delay:d,playSpeed:p}).set(s(s({},l),{},{options:{delay:d,iteration:h,playSpeed:p}}))},[i,l,h]),n.createElement("div",{"data-testid":"Layer-".concat(y),className:"Layer-".concat(y),style:s({position:"absolute",width:o.width,height:o.height,left:0,right:0,top:0,bottom:0,margin:"auto"},c)},r)};function y(){var n="undefined"!=typeof window?window:{};return{width:n.innerWidth,height:n.innerHeight}}h.defaultProps={name:"animation",id:1,ratio:{width:1080,height:720},keyframes:{},style:{},playSpeed:1,delay:0,children:n.createElement("div",null),iteration:"infinite"},h.propTypes={name:i.string,id:i.number,ratio:i.object,keyframes:i.object,style:i.object,layerStyle:i.object,playSpeed:i.number,delay:i.number||i.string,children:i.any,iteration:i.any};var f=function(i){var a,o,l,s=i.children,c=i.width,d=i.height,h=i.jsCanva,f=i.autoPlay,m=i.controls,g=i.playing,b=i.fullWidth,v=i.animationDuration,i=r(null),w=p(t(!1),2),x=w[0],j=w[1],w=p(t(0),2),C=w[0],E=w[1],w=(a=c,o=d,w=p(t(y()),2),O=w[0],l=w[1],e(function(){function n(){var n={height:y().height/(16/9),width:y().width/(16/9)};n.scale=Math.min(n.width/a,n.height/o),l(n)}return n(),window.addEventListener("resize",n),function(){return window.removeEventListener("resize",n)}},[]),O),O=w.height,P=w.width,w=w.scale;return e(function(){var e=u.getDuration();h(u),v(e),f&&(u.play(),j(!0)),u.on("play",function(n){j(!0)}),u.on("paused",function(n){j(!1)}),u.on("animate",function(n){E(100*n.time/e)}),g({playing:x,progress:C})},[x,C]),n.createElement("div",{id:"canvasContainer"},n.createElement("div",{className:"Canvas",id:"recorderCanvas",ref:i},n.createElement("div",{className:"CanvasInner",style:b?{width:"100%",height:"100%"}:{width:P,height:O}},n.createElement("div",{id:"Composition",className:"Composition",style:b?{width:c,height:d}:{width:c,height:d,transform:"translate(-50%, -50%) scale(".concat(w||1,")")}},n.createElement("div",{className:"Layers",style:{width:c,height:d}},s)))),m&&n.createElement("div",{className:"playerWrapper"},n.createElement("div",{className:"player",style:{width:P}},n.createElement("div",{className:"".concat(x?"pause":"play"),onClick:function(){u.isPaused()?u.play():u.pause()}}),n.createElement("input",{className:"progress",type:"range",onChange:function(n){u.pause(),u.setTime(n.target.value+"%")},value:C.toString(),min:"0",max:"100"}))))},m=function(e){var t=e.children,r=e.width,i=e.height,a=e.jsCanva,o=e.autoPlay,l=e.controls,s=e.playing,c=e.fullWidth,e=e.animationDuration;return n.createElement(f,{height:i,width:r,autoPlay:o,controls:l,playing:s,jsCanva:a,fullWidth:c,animationDuration:e},t)};m.defaultProps={width:1920,height:1080,children:[],autoPlay:!1,controls:!0,playing:function(){},jsCanva:function(){},fullWidth:!1,animationDuration:function(){}},m.propTypes={width:i.number,height:i.number,children:i.any,autoPlay:i.bool,controls:i.bool,playing:i.func,jsCanva:i.any,fullWidth:i.bool,animationDuration:i.func};export{m as Canvas,h as Layer};
//# sourceMappingURL=index.esm.js.map
