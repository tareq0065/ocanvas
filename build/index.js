"use strict";var React=require("react"),PropTypes=require("prop-types"),reactScenejs=require("react-scenejs");function styleInject(e,n){var t,r,n=(n=void 0===n?{}:n).insertAt;e&&"undefined"!=typeof document&&(t=document.head||document.getElementsByTagName("head")[0],(r=document.createElement("style")).type="text/css","top"===n&&t.firstChild?t.insertBefore(r,t.firstChild):t.appendChild(r),r.styleSheet?r.styleSheet.cssText=e:r.appendChild(document.createTextNode(e)))}var css_248z=':root {\n  --background: #fff;\n  --font-color: #494949; }\n\n@media (prefers-color-scheme: dark) {\n  :root {\n    --background: #494949;\n    --font-color: #fafafa; } }\n\n#canvasContainer {\n  min-width: 100%;\n  min-height: 100%; }\n\n.Canvas {\n  font-family: "Avenir Next", Helvetica, Arial, sans-serif;\n  font-size: 14px;\n  margin: auto;\n  flex-shrink: 0;\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n  align-items: center;\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  height: 100%;\n  width: 100%;\n  background: #ebecf0; }\n  .Canvas .CanvasInner {\n    grid-area: canvas;\n    position: relative;\n    z-index: 0;\n    padding: 10px; }\n    .Canvas .CanvasInner .Composition {\n      position: relative;\n      left: 50%;\n      top: 50%;\n      transform: translate(-50%, -50%);\n      transform-origin: center center;\n      -webkit-box-shadow: 0 2px 8px rgba(14, 19, 24, 0.07);\n      -moz-box-shadow: 0 2px 8px rgba(14, 19, 24, 0.07);\n      box-shadow: 0 2px 8px rgba(14, 19, 24, 0.07);\n      overflow: hidden; }\n      .Canvas .CanvasInner .Composition .Layers {\n        pointer-events: none;\n        background: white; }\n\n.player {\n  position: relative;\n  text-align: center; }\n\n.circles .circle {\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  width: 200px;\n  height: 200px;\n  border: 100px solid black;\n  border-radius: 50%;\n  transform: translate(-50%, -50%); }\n\n.player .play, .player .pause, .player .progress {\n  display: inline-block;\n  vertical-align: middle; }\n\n.player .play {\n  border-left: 14px solid #333;\n  border-top: 8px solid transparent;\n  border-bottom: 8px solid transparent; }\n\n.player .pause {\n  border-left: 4px solid #333;\n  border-right: 4px solid #333;\n  width: 14px;\n  height: 16px;\n  box-sizing: border-box; }\n\n.player input[type=range] {\n  width: 200px; }\n\n.player input[type=range] {\n  -webkit-appearance: none;\n  background: rgba(0, 0, 0, 0.2);\n  height: 5px; }\n\n.player input[type=range]::-webkit-slider-thumb {\n  -webkit-appearance: none;\n  width: 14px;\n  height: 14px;\n  border-radius: 7px;\n  background: #333; }\n\n.player input[type=range]:focus {\n  outline: none; }\n\n.Layer-circle {\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  width: 200px;\n  height: 200px;\n  border: 100px solid black;\n  border-radius: 50%;\n  transform: translate(-50%, -50%); }\n\n.raindrop {\n  position: absolute;\n  width: 300px;\n  height: 300px;\n  left: 0;\n  right: 0;\n  top: 0;\n  bottom: 0;\n  margin: auto;\n  border: 100px solid black;\n  border-radius: 50%;\n  box-sizing: border-box;\n  transform: scale(0); }\n',Layer=(styleInject(css_248z),function(e){var n=e.children,t=e.name,r=(e.id,e.ratio,e.width,e.height,e.from),a=e.to,i=(e.playSpeed,e.delay),e=(e.autoPlay,e.iteration);return React.createElement("div",{"data-testid":"Layer-".concat(t),style:{position:"absolute",left:0,right:0,top:0,bottom:0,margin:"auto"}},React.createElement(reactScenejs.SceneItem,{from:r,to:a,delay:i,ref:function(e){return window.e=e},duration:1.5,easing:reactScenejs.EASE_IN_OUT,iterationCount:e,css:!0,autoplay:!0},n))});function _arrayWithHoles(e){if(Array.isArray(e))return e}function _iterableToArrayLimit(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,a,i=[],o=!0,s=!1;try{for(t=t.call(e);!(o=(r=t.next()).done)&&(i.push(r.value),!n||i.length!==n);o=!0);}catch(e){s=!0,a=e}finally{try{o||null==t.return||t.return()}finally{if(s)throw a}}return i}}function _arrayLikeToArray(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function _unsupportedIterableToArray(e,n){var t;if(e)return"string"==typeof e?_arrayLikeToArray(e,n):"Map"===(t="Object"===(t=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:t)||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?_arrayLikeToArray(e,n):void 0}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _slicedToArray(e,n){return _arrayWithHoles(e)||_iterableToArrayLimit(e,n)||_unsupportedIterableToArray(e,n)||_nonIterableRest()}function getWindowDimensions(){var e="undefined"!=typeof window?window:{};return{width:e.innerWidth,height:e.innerHeight}}function useWindowDimensions(e,n,t){var r=_slicedToArray(React.useState(getWindowDimensions()),2),a=r[0],i=r[1];return React.useEffect(function(){function e(){var e={height:getWindowDimensions().height/(16/9),width:getWindowDimensions().width/(16/9)};e.scale=Math.min(e.width/n,e.height/t),i(e)}return e(),window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}},[]),a}Layer.defaultProps={name:"animation",id:1,ratio:{width:1080,height:720},width:300,height:300,keyframes:{},playSpeed:1,delay:0,autoPlay:!1,children:function(){return React.createElement(React.Fragment,null)},iteration:"infinite"},Layer.propTypes={name:PropTypes.string,id:PropTypes.number,ratio:PropTypes.object,width:PropTypes.any,height:PropTypes.any,from:PropTypes.any,to:PropTypes.any,playSpeed:PropTypes.number,delay:PropTypes.number,autoPlay:PropTypes.bool,children:PropTypes.any,iteration:PropTypes.any};var Canvas=function(e){var n=e.children,t=e.width,e=e.height,r=React.useRef(null),a=React.useRef(),i=_slicedToArray(React.useState(!1),2),o=i[0],s=i[1],i=_slicedToArray(React.useState(0),2),l=i[0],c=i[1],i=useWindowDimensions(r,t,e),p=i.height,d=i.width,i=i.scale;return React.useEffect(function(){console.log("sceneRef:",a.current);var n=a.current.getDuration();console.log("duration:",n),a.current.events.play(function(e){s(!0)}),a.current.events.paused(function(e){s(!1)}),a.current.events.animate(function(e){c(100*e.time/n)})},[a.current]),React.createElement("div",{id:"canvasContainer"},React.createElement("div",{className:"Canvas",id:"recorderCanvas",ref:r},React.createElement("div",{className:"CanvasInner",style:{width:d,height:p}},React.createElement("div",{className:"Composition",style:{width:t,height:e,transform:"translate(-50%, -50%) scale(".concat(i,")")}},React.createElement("div",{className:"Layers",style:{width:t,height:e}},React.createElement(reactScenejs.Scene,{ready:!0,autoplay:!0,ref:a},n))))),React.createElement("div",{style:{position:"absolute",bottom:20,margin:0,left:0,right:0}},React.createElement("div",{className:"player"},React.createElement("div",{className:"".concat(o?"pause":"play"),onClick:function(){}}),React.createElement("input",{className:"progress",type:"range",onChange:function(e){},value:l,min:"0",max:"100"}))))};Canvas.propTypes={width:PropTypes.number,height:PropTypes.number,children:PropTypes.any},exports.Canvas=Canvas,exports.Layer=Layer;
//# sourceMappingURL=index.js.map
