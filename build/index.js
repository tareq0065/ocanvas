"use strict";var React=require("react");function _arrayWithHoles(e){if(Array.isArray(e))return e}function _iterableToArrayLimit(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,o=[],s=!0,a=!1;try{for(r=r.call(e);!(s=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);s=!0);}catch(e){a=!0,i=e}finally{try{s||null==r.return||r.return()}finally{if(a)throw i}}return o}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function _unsupportedIterableToArray(e,t){var r;if(e)return"string"==typeof e?_arrayLikeToArray(e,t):"Map"===(r="Object"===(r=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:r)||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(e,t):void 0}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_unsupportedIterableToArray(e,t)||_nonIterableRest()}require("react-dom");var hasRequiredReactIs_production_min,propTypes={exports:{}},reactIs={exports:{}},reactIs_production_min={};function requireReactIs_production_min(){var e,r,n,i,o,s,a,c,u,f,p,l,t,d,h,m,y,v,g;return hasRequiredReactIs_production_min||(hasRequiredReactIs_production_min=1,e="function"==typeof Symbol&&Symbol.for,r=e?Symbol.for("react.element"):60103,n=e?Symbol.for("react.portal"):60106,i=e?Symbol.for("react.fragment"):60107,o=e?Symbol.for("react.strict_mode"):60108,s=e?Symbol.for("react.profiler"):60114,a=e?Symbol.for("react.provider"):60109,c=e?Symbol.for("react.context"):60110,u=e?Symbol.for("react.async_mode"):60111,f=e?Symbol.for("react.concurrent_mode"):60111,p=e?Symbol.for("react.forward_ref"):60112,l=e?Symbol.for("react.suspense"):60113,t=e?Symbol.for("react.suspense_list"):60120,d=e?Symbol.for("react.memo"):60115,h=e?Symbol.for("react.lazy"):60116,m=e?Symbol.for("react.block"):60121,y=e?Symbol.for("react.fundamental"):60117,v=e?Symbol.for("react.responder"):60118,g=e?Symbol.for("react.scope"):60119,reactIs_production_min.AsyncMode=u,reactIs_production_min.ConcurrentMode=f,reactIs_production_min.ContextConsumer=c,reactIs_production_min.ContextProvider=a,reactIs_production_min.Element=r,reactIs_production_min.ForwardRef=p,reactIs_production_min.Fragment=i,reactIs_production_min.Lazy=h,reactIs_production_min.Memo=d,reactIs_production_min.Portal=n,reactIs_production_min.Profiler=s,reactIs_production_min.StrictMode=o,reactIs_production_min.Suspense=l,reactIs_production_min.isAsyncMode=function(e){return T(e)||E(e)===u},reactIs_production_min.isConcurrentMode=T,reactIs_production_min.isContextConsumer=function(e){return E(e)===c},reactIs_production_min.isContextProvider=function(e){return E(e)===a},reactIs_production_min.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===r},reactIs_production_min.isForwardRef=function(e){return E(e)===p},reactIs_production_min.isFragment=function(e){return E(e)===i},reactIs_production_min.isLazy=function(e){return E(e)===h},reactIs_production_min.isMemo=function(e){return E(e)===d},reactIs_production_min.isPortal=function(e){return E(e)===n},reactIs_production_min.isProfiler=function(e){return E(e)===s},reactIs_production_min.isStrictMode=function(e){return E(e)===o},reactIs_production_min.isSuspense=function(e){return E(e)===l},reactIs_production_min.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===i||e===f||e===s||e===o||e===l||e===t||"object"==typeof e&&null!==e&&(e.$$typeof===h||e.$$typeof===d||e.$$typeof===a||e.$$typeof===c||e.$$typeof===p||e.$$typeof===y||e.$$typeof===v||e.$$typeof===g||e.$$typeof===m)},reactIs_production_min.typeOf=E),reactIs_production_min;function E(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case u:case f:case i:case s:case o:case l:return e;default:switch(e=e&&e.$$typeof){case c:case p:case h:case d:case a:return e;default:return t}}case n:return t}}}function T(e){return E(e)===f}}var hasRequiredReactIs_development,hasRequiredReactIs,objectAssign,hasRequiredObjectAssign,ReactPropTypesSecret_1,hasRequiredReactPropTypesSecret,has,hasRequiredHas,checkPropTypes_1,hasRequiredCheckPropTypes,factoryWithTypeCheckers,hasRequiredFactoryWithTypeCheckers,factoryWithThrowingShims,hasRequiredFactoryWithThrowingShims,ReactIs,throwOnDirectAccess,reactIs_development={};function requireReactIs_development(){var e,i,o,s,a,c,u,f,p,l,d,h,t,m,y,r,n,v,g,E,T,I,S,A,O,_,N,b,R,C,P;return hasRequiredReactIs_development||(hasRequiredReactIs_development=1,"production"!==process.env.NODE_ENV&&(e="function"==typeof Symbol&&Symbol.for,i=e?Symbol.for("react.element"):60103,o=e?Symbol.for("react.portal"):60106,s=e?Symbol.for("react.fragment"):60107,a=e?Symbol.for("react.strict_mode"):60108,c=e?Symbol.for("react.profiler"):60114,u=e?Symbol.for("react.provider"):60109,f=e?Symbol.for("react.context"):60110,p=e?Symbol.for("react.async_mode"):60111,l=e?Symbol.for("react.concurrent_mode"):60111,d=e?Symbol.for("react.forward_ref"):60112,h=e?Symbol.for("react.suspense"):60113,t=e?Symbol.for("react.suspense_list"):60120,m=e?Symbol.for("react.memo"):60115,y=e?Symbol.for("react.lazy"):60116,r=e?Symbol.for("react.block"):60121,n=e?Symbol.for("react.fundamental"):60117,v=e?Symbol.for("react.responder"):60118,g=e?Symbol.for("react.scope"):60119,e=l,E=f,T=u,I=i,S=d,A=s,O=y,_=m,N=o,b=c,R=a,C=h,P=!1,reactIs_development.AsyncMode=p,reactIs_development.ConcurrentMode=e,reactIs_development.ContextConsumer=E,reactIs_development.ContextProvider=T,reactIs_development.Element=I,reactIs_development.ForwardRef=S,reactIs_development.Fragment=A,reactIs_development.Lazy=O,reactIs_development.Memo=_,reactIs_development.Portal=N,reactIs_development.Profiler=b,reactIs_development.StrictMode=R,reactIs_development.Suspense=C,reactIs_development.isAsyncMode=function(e){return P||(P=!0,console.warn("The ReactIs.isAsyncMode() alias has been deprecated, and will be removed in React 17+. Update your code to use ReactIs.isConcurrentMode() instead. It has the exact same API.")),j(e)||w(e)===p},reactIs_development.isConcurrentMode=j,reactIs_development.isContextConsumer=function(e){return w(e)===f},reactIs_development.isContextProvider=function(e){return w(e)===u},reactIs_development.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===i},reactIs_development.isForwardRef=function(e){return w(e)===d},reactIs_development.isFragment=function(e){return w(e)===s},reactIs_development.isLazy=function(e){return w(e)===y},reactIs_development.isMemo=function(e){return w(e)===m},reactIs_development.isPortal=function(e){return w(e)===o},reactIs_development.isProfiler=function(e){return w(e)===c},reactIs_development.isStrictMode=function(e){return w(e)===a},reactIs_development.isSuspense=function(e){return w(e)===h},reactIs_development.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===s||e===l||e===c||e===a||e===h||e===t||"object"==typeof e&&null!==e&&(e.$$typeof===y||e.$$typeof===m||e.$$typeof===u||e.$$typeof===f||e.$$typeof===d||e.$$typeof===n||e.$$typeof===v||e.$$typeof===g||e.$$typeof===r)},reactIs_development.typeOf=w)),reactIs_development;function w(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case i:var r=e.type;switch(r){case p:case l:case s:case c:case a:case h:return r;default:var n=r&&r.$$typeof;switch(n){case f:case d:case y:case m:case u:return n;default:return t}}case o:return t}}}function j(e){return w(e)===l}}function requireReactIs(){var e;return hasRequiredReactIs||(hasRequiredReactIs=1,e=reactIs,"production"===process.env.NODE_ENV?e.exports=requireReactIs_production_min():e.exports=requireReactIs_development()),reactIs.exports}function requireObjectAssign(){var c,u,f;return hasRequiredObjectAssign||(hasRequiredObjectAssign=1,c=Object.getOwnPropertySymbols,u=Object.prototype.hasOwnProperty,f=Object.prototype.propertyIsEnumerable,objectAssign=function(){try{if(Object.assign){var e=new String("abc");if(e[5]="de","5"!==Object.getOwnPropertyNames(e)[0]){for(var t={},r=0;r<10;r++)t["_"+String.fromCharCode(r)]=r;var n,i=Object.getOwnPropertyNames(t).map(function(e){return t[e]});if("0123456789"===i.join(""))return n={},"abcdefghijklmnopqrst".split("").forEach(function(e){n[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},n)).join("")?1:void 0}}}catch(e){}}()?Object.assign:function(e,t){for(var r,n=function(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}(e),i=1;i<arguments.length;i++){for(var o in r=Object(arguments[i]))u.call(r,o)&&(n[o]=r[o]);if(c)for(var s=c(r),a=0;a<s.length;a++)f.call(r,s[a])&&(n[s[a]]=r[s[a]])}return n}),objectAssign}function requireReactPropTypesSecret(){return hasRequiredReactPropTypesSecret||(hasRequiredReactPropTypesSecret=1,ReactPropTypesSecret_1="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"),ReactPropTypesSecret_1}function requireHas(){return hasRequiredHas||(hasRequiredHas=1,has=Function.call.bind(Object.prototype.hasOwnProperty)),has}function requireCheckPropTypes(){var c,u,f,p;return hasRequiredCheckPropTypes||(hasRequiredCheckPropTypes=1,p=function(){},"production"!==process.env.NODE_ENV&&(c=requireReactPropTypesSecret(),u={},f=requireHas(),p=function(e){e="Warning: "+e;"undefined"!=typeof console&&console.error(e);try{throw new Error(e)}catch(e){}}),e.resetWarningCache=function(){"production"!==process.env.NODE_ENV&&(u={})},checkPropTypes_1=e),checkPropTypes_1;function e(e,t,r,n,i){if("production"!==process.env.NODE_ENV)for(var o in e)if(f(e,o)){var s,a;try{if("function"!=typeof e[o])throw(a=Error((n||"React class")+": "+r+" type `"+o+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+typeof e[o]+"`.This often happens because of typos such as `PropTypes.function` instead of `PropTypes.func`.")).name="Invariant Violation",a;s=e[o](t,o,n,r,null,c)}catch(e){s=e}!s||s instanceof Error||p((n||"React class")+": type specification of "+r+" `"+o+"` is invalid; the type checker function must return `null` or an `Error` but returned a "+typeof s+". You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument)."),s instanceof Error&&!(s.message in u)&&(u[s.message]=!0,o=i?i():"",p("Failed "+r+" type: "+s.message+(null!=o?o:"")))}}}function requireFactoryWithTypeCheckers(){var u,y,v,g,n,E;return hasRequiredFactoryWithTypeCheckers||(hasRequiredFactoryWithTypeCheckers=1,u=requireReactIs(),y=requireObjectAssign(),v=requireReactPropTypesSecret(),g=requireHas(),n=requireCheckPropTypes(),E=function(){},"production"!==process.env.NODE_ENV&&(E=function(e){e="Warning: "+e;"undefined"!=typeof console&&console.error(e);try{throw new Error(e)}catch(e){}}),factoryWithTypeCheckers=function(o,f){var s="function"==typeof Symbol&&Symbol.iterator,a="@@iterator";var p="<<anonymous>>",e={array:t("array"),bigint:t("bigint"),bool:t("boolean"),func:t("function"),number:t("number"),object:t("object"),string:t("string"),symbol:t("symbol"),any:r(i),arrayOf:function(c){return r(function(e,t,r,n,i){if("function"!=typeof c)return new l("Property `"+i+"` of component `"+r+"` has invalid PropType notation inside arrayOf.");var o=e[t];if(!Array.isArray(o))return new l("Invalid "+n+" `"+i+"` of type `"+h(o)+"` supplied to `"+r+"`, expected an array.");for(var s=0;s<o.length;s++){var a=c(o,s,r,n,i+"["+s+"]",v);if(a instanceof Error)return a}return null})},element:r(function(e,t,r,n,i){return e=e[t],o(e)?null:new l("Invalid "+n+" `"+i+"` of type `"+h(e)+"` supplied to `"+r+"`, expected a single ReactElement.")}),elementType:r(function(e,t,r,n,i){return e=e[t],u.isValidElementType(e)?null:new l("Invalid "+n+" `"+i+"` of type `"+h(e)+"` supplied to `"+r+"`, expected a single ReactElement type.")}),instanceOf:function(s){return r(function(e,t,r,n,i){var o;return e[t]instanceof s?null:(o=s.name||p,new l("Invalid "+n+" `"+i+"` of type `"+((n=e[t]).constructor&&n.constructor.name?n.constructor.name:p)+"` supplied to `"+r+"`, expected instance of `"+o+"`."))})},node:r(function(e,t,r,n,i){return c(e[t])?null:new l("Invalid "+n+" `"+i+"` supplied to `"+r+"`, expected a ReactNode.")}),objectOf:function(c){return r(function(e,t,r,n,i){if("function"!=typeof c)return new l("Property `"+i+"` of component `"+r+"` has invalid PropType notation inside objectOf.");var o,s=e[t];if("object"!==(e=h(s)))return new l("Invalid "+n+" `"+i+"` of type `"+e+"` supplied to `"+r+"`, expected an object.");for(o in s)if(g(s,o)){var a=c(s,o,r,n,i+"."+o,v);if(a instanceof Error)return a}return null})},oneOf:function(a){if(Array.isArray(a))return r(function(e,t,r,n,i){for(var o=e[t],s=0;s<a.length;s++)if(function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}(o,a[s]))return null;e=JSON.stringify(a,function(e,t){return"symbol"===m(t)?String(t):t});return new l("Invalid "+n+" `"+i+"` of value `"+String(o)+"` supplied to `"+r+"`, expected one of "+e+".")});"production"!==process.env.NODE_ENV&&E(1<arguments.length?"Invalid arguments supplied to oneOf, expected an array, got "+arguments.length+" arguments. A common mistake is to write oneOf(x, y, z) instead of oneOf([x, y, z]).":"Invalid argument supplied to oneOf, expected an array.");return i},oneOfType:function(c){if(!Array.isArray(c))return"production"!==process.env.NODE_ENV&&E("Invalid argument supplied to oneOfType, expected an instance of array."),i;for(var e=0;e<c.length;e++){var t=c[e];if("function"!=typeof t)return E("Invalid argument supplied to oneOfType. Expected an array of check functions, but received "+function(e){var t=m(e);switch(t){case"array":case"object":return"an "+t;case"boolean":case"date":case"regexp":return"a "+t;default:return t}}(t)+" at index "+e+"."),i}return r(function(e,t,r,n,i){for(var o=[],s=0;s<c.length;s++){var a=(0,c[s])(e,t,r,n,i,v);if(null==a)return null;a.data&&g(a.data,"expectedType")&&o.push(a.data.expectedType)}return new l("Invalid "+n+" `"+i+"` supplied to `"+r+"`"+(0<o.length?", expected one of type ["+o.join(", ")+"]":"")+".")})},shape:function(c){return r(function(e,t,r,n,i){var o,s=e[t];if("object"!==(e=h(s)))return new l("Invalid "+n+" `"+i+"` of type `"+e+"` supplied to `"+r+"`, expected `object`.");for(o in c){var a=c[o];if("function"!=typeof a)return d(r,n,i,o,m(a));a=a(s,o,r,n,i+"."+o,v);if(a)return a}return null})},exact:function(u){return r(function(e,t,r,n,i){var o,s=e[t],a=h(s);if("object"!==a)return new l("Invalid "+n+" `"+i+"` of type `"+a+"` supplied to `"+r+"`, expected `object`.");for(o in y({},e[t],u)){var c=u[o];if(g(u,o)&&"function"!=typeof c)return d(r,n,i,o,m(c));if(!c)return new l("Invalid "+n+" `"+i+"` key `"+o+"` supplied to `"+r+"`.\nBad object: "+JSON.stringify(e[t],null,"  ")+"\nValid keys: "+JSON.stringify(Object.keys(u),null,"  "));c=c(s,o,r,n,i+"."+o,v);if(c)return c}return null})}};function l(e,t){this.message=e,this.data=t&&"object"==typeof t?t:{},this.stack=""}function r(a){var c,u;function e(e,t,r,n,i,o,s){if(n=n||p,o=o||r,s!==v){if(f)throw(s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use `PropTypes.checkPropTypes()` to call them. Read more at http://fb.me/use-check-prop-types")).name="Invariant Violation",s;"production"!==process.env.NODE_ENV&&"undefined"!=typeof console&&!c[s=n+":"+r]&&u<3&&(E("You are manually calling a React.PropTypes validation function for the `"+o+"` prop on `"+n+"`. This is deprecated and will throw in the standalone `prop-types` package. You may be seeing this warning due to a third-party PropTypes library. See https://fb.me/react-warning-dont-call-proptypes for details."),c[s]=!0,u++)}return null==t[r]?e?null===t[r]?new l("The "+i+" `"+o+"` is marked as required in `"+n+"`, but its value is `null`."):new l("The "+i+" `"+o+"` is marked as required in `"+n+"`, but its value is `undefined`."):null:a(t,r,n,i,o)}"production"!==process.env.NODE_ENV&&(c={},u=0);var t=e.bind(null,!1);return t.isRequired=e.bind(null,!0),t}function t(s){return r(function(e,t,r,n,i,o){return h(e=e[t])!==s?new l("Invalid "+n+" `"+i+"` of type `"+m(e)+"` supplied to `"+r+"`, expected `"+s+"`.",{expectedType:s}):null})}function d(e,t,r,n,i){return new l((e||"React class")+": "+t+" type `"+r+"."+n+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+i+"`.")}function c(e){switch(typeof e){case"number":case"string":case"undefined":return!0;case"boolean":return!e;case"object":if(Array.isArray(e))return e.every(c);if(null!==e&&!o(e)){var t=function(e){if("function"==typeof(e=e&&(s&&e[s]||e[a])))return e}(e);if(!t)return!1;var r,n=t.call(e);if(t!==e.entries){for(;!(r=n.next()).done;)if(!c(r.value))return!1}else for(;!(r=n.next()).done;){var i=r.value;if(i&&!c(i[1]))return!1}}return!0;default:return!1}}function h(e){var t=typeof e;return Array.isArray(e)?"array":e instanceof RegExp?"object":(e=e,"symbol"===t||e&&("Symbol"===e["@@toStringTag"]||"function"==typeof Symbol&&e instanceof Symbol)?"symbol":t)}function m(e){if(null==e)return""+e;var t=h(e);if("object"===t){if(e instanceof Date)return"date";if(e instanceof RegExp)return"regexp"}return t}return l.prototype=Error.prototype,e.checkPropTypes=n,e.resetWarningCache=n.resetWarningCache,e.PropTypes=e}),factoryWithTypeCheckers;function i(){return null}}function requireFactoryWithThrowingShims(){var s;return hasRequiredFactoryWithThrowingShims||(hasRequiredFactoryWithThrowingShims=1,s=requireReactPropTypesSecret(),i.resetWarningCache=n,factoryWithThrowingShims=function(){function e(e,t,r,n,i,o){if(o!==s)throw(o=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types")).name="Invariant Violation",o}function t(){return e}var r={array:e.isRequired=e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:i,resetWarningCache:n};return r.PropTypes=r}),factoryWithThrowingShims;function n(){}function i(){}}function styleInject(e,t){var r,n,t=(t=void 0===t?{}:t).insertAt;e&&"undefined"!=typeof document&&(r=document.head||document.getElementsByTagName("head")[0],(n=document.createElement("style")).type="text/css","top"===t&&r.firstChild?r.insertBefore(n,r.firstChild):r.appendChild(n),n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e)))}"production"!==process.env.NODE_ENV?(ReactIs=requireReactIs(),throwOnDirectAccess=!0,propTypes.exports=requireFactoryWithTypeCheckers()(ReactIs.isElement,throwOnDirectAccess)):propTypes.exports=requireFactoryWithThrowingShims()();var css_248z$1=':root {\n  --background: #fff;\n  --font-color: #494949; }\n\n@media (prefers-color-scheme: dark) {\n  :root {\n    --background: #494949;\n    --font-color: #fafafa; } }\n\n#canvasContainer {\n  min-width: 100%;\n  min-height: 100%; }\n\n.Canvas {\n  font-family: "Avenir Next", Helvetica, Arial, sans-serif;\n  margin: auto;\n  flex-shrink: 0;\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n  align-items: center;\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  height: 100%;\n  width: 100%;\n  background: #ebecf0; }\n  .Canvas .CanvasInner {\n    grid-area: canvas;\n    position: relative;\n    z-index: 0;\n    padding: 10px; }\n    .Canvas .CanvasInner .Composition {\n      position: relative;\n      left: 50%;\n      top: 50%;\n      transform: translate(-50%, -50%);\n      transform-origin: center center;\n      -webkit-box-shadow: 0 2px 8px rgba(14, 19, 24, 0.07);\n      -moz-box-shadow: 0 2px 8px rgba(14, 19, 24, 0.07);\n      box-shadow: 0 2px 8px rgba(14, 19, 24, 0.07);\n      overflow: hidden; }\n      .Canvas .CanvasInner .Composition .Layer {\n        pointer-events: none;\n        background: white; }\n';function getWindowDimensions(){var e="undefined"!=typeof window?window:{};return{width:e.innerWidth,height:e.innerHeight}}function useWindowDimensions(e,t,r){var n=_slicedToArray(React.useState(getWindowDimensions()),2),i=n[0],o=n[1];return React.useEffect(function(){function e(){var e={height:getWindowDimensions().height/(16/9),width:getWindowDimensions().width/(16/9)};e.scale=Math.min(e.width/t,e.height/r),o(e)}return e(),window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}},[]),i}function _defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}styleInject(css_248z$1);var RGB="rgb",RGBA="rgba",HSL="hsl",HSLA="hsla",COLOR_MODELS=[RGB,RGBA,HSL,HSLA],FUNCTION="function",PROPERTY="property",ARRAY="array",OBJECT="object",STRING="string",NUMBER="number",UNDEFINED="undefined",IS_WINDOW=typeof window!==UNDEFINED,doc=typeof document!==UNDEFINED&&document,prefixes=["webkit","ms","moz","o"],getCrossBrowserProperty=function(e){if(doc){var t=(doc.body||doc.documentElement).style,r=prefixes.length;if(typeof t[e]!==UNDEFINED)return e;for(var n=0;n<r;++n){var i="-"+prefixes[n]+"-"+e;if(typeof t[i]!==UNDEFINED)return i}}return""},TRANSFORM=getCrossBrowserProperty("transform"),FILTER=getCrossBrowserProperty("filter"),ANIMATION=getCrossBrowserProperty("animation"),KEYFRAMES=ANIMATION.replace("animation","keyframes"),OPEN_CLOSED_CHARACTERS=[{open:"(",close:")"},{open:'"',close:'"'},{open:"'",close:"'"},{open:'\\"',close:'\\"'},{open:"\\'",close:"\\'"}];function __spreadArrays$2(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;for(var n=Array(e),i=0,t=0;t<r;t++)for(var o=arguments[t],s=0,a=o.length;s<a;s++,i++)n[i]=o[s];return n}function dot$1(e,t,r,n){return(e*n+t*r)/(r+n)}function isUndefined(e){return typeof e===UNDEFINED}function isObject(e){return e&&typeof e===OBJECT}function isArray(e){return Array.isArray(e)}function isString(e){return typeof e===STRING}function isFunction(e){return typeof e===FUNCTION}function isEqualSeparator(e,t){return(""===t||" "==t)&&(""===e||" "==e)||e===t}function findOpen(e,t,r,n,i){return findIgnore(e,t,r)?r:findClose(e,t,r+1,n,i)}function findIgnore(e,t,r){return e.ignore?(t=t.slice(Math.max(r-3,0),r+3).join(""),new RegExp(e.ignore).exec(t)):null}function findClose(i,o,e,s,a){for(var c,t=e;t<s;++t){var r=function(e){var t,r,n=o[e].trim();return n!==i.close||findIgnore(i,o,e)?(t=e,-1===(t=(r=find(a,function(e){return e.open===n}))?findOpen(r,o,e,s,a):t)?(c=e,"break"):void(c=e=t)):{value:e}}(t),t=c;if("object"==typeof r)return r.value;if("break"===r)break}return-1}function splitText(o,e){var e=isString(e)?{separator:e}:e,t=e.separator,s=void 0===t?",":t,a=e.isSeparateFirst,c=e.isSeparateOnlyOpenClose,t=e.isSeparateOpenClose,u=void 0===t?c:t,t=e.openCloseCharacters,f=void 0===t?OPEN_CLOSED_CHARACTERS:t,e=f.map(function(e){var t=e.open,e=e.close;return t===e?t:t+"|"+e}).join("|"),t=new RegExp("(\\s*"+s+"\\s*|"+e+"|\\s+)","g"),p=o.split(t).filter(Boolean),l=p.length,d=[],h=[];function m(){return h.length&&(d.push(h.join("")),h=[])}for(var y,r=0;r<l;++r){var n=function(e){var t=p[e].trim(),r=e,n=find(f,function(e){return e.open===t}),i=find(f,function(e){return e.close===t});if(n){if(-1!==(r=findOpen(n,p,e,l,f))&&u)return m()&&a||(d.push(p.slice(e,r+1).join("")),e=r,a)?(y=e,"break"):(y=e,"continue")}else{if(i&&!findIgnore(i,p,e))return(n=__spreadArrays$2(f)).splice(f.indexOf(i),1),{value:splitText(o,{separator:s,isSeparateFirst:a,isSeparateOnlyOpenClose:c,isSeparateOpenClose:u,openCloseCharacters:n})};if(isEqualSeparator(t,s)&&!c)return m(),a?(y=e,"break"):(y=e,"continue")}h.push(p.slice(e,(r=-1===r?l-1:r)+1).join("")),y=e=r}(r),r=y;if("object"==typeof n)return n.value;if("break"===n)break}return h.length&&d.push(h.join("")),d}function splitSpace(e){return splitText(e,"")}function splitComma(e){return splitText(e,",")}function splitBracket(e){e=/([^(]*)\(([\s\S]*)\)([\s\S]*)/g.exec(e);return!e||e.length<4?{}:{prefix:e[1],value:e[2],suffix:e[3]}}function splitUnit(e){var t,r,e=/^([^\d|e|\-|\+]*)((?:\d|\.|-|e-|e\+)+)(\S*)$/g.exec(e);return e?(t=e[1],r=e[2],{prefix:t,unit:e[3],value:parseFloat(r)}):{prefix:"",unit:"",value:NaN}}function camelize(e){return e.replace(/[\s-_]([a-z])/g,function(e,t){return t.toUpperCase()})}function decamelize(e,n){return void 0===n&&(n="-"),e.replace(/([a-z])([A-Z])/g,function(e,t,r){return""+t+n+r.toLowerCase()})}function toArray(e){return[].slice.call(e)}function now(){return Date.now?Date.now():(new Date).getTime()}function findIndex(e,t,r){void 0===r&&(r=-1);for(var n=e.length,i=0;i<n;++i)if(t(e[i],i,e))return i;return r}function find(e,t,r){t=findIndex(e,t);return-1<t?e[t]:r}var requestAnimationFrame=function(){var r=now(),e=IS_WINDOW&&(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame);return e?e.bind(window):function(e){var t=now();return window.setTimeout(function(){e(t-r)},1e3/60)}}(),cancelAnimationFrame=function(){var e=IS_WINDOW&&(window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame);return e?e.bind(window):function(e){clearTimeout(e)}}();function getKeys(e){return Object.keys(e)}function sortOrders(e,r){void 0===r&&(r=[]),e.sort(function(e,t){e=r.indexOf(e),t=r.indexOf(t);return-1===t&&-1===e?0:-1===e?1:-1===t?-1:e-t})}function between(e,t,r){return Math.max(t,Math.min(e,r))}function cutHex(e){return e.replace("#","")}function hexToRGBA(e){var e=cutHex(e),t=parseInt(e.substring(0,2),16),r=parseInt(e.substring(2,4),16),n=parseInt(e.substring(4,6),16),e=parseInt(e.substring(6,8),16)/255;return[t,r,n,e=isNaN(e)?1:e]}function toFullHex(e){var t=e.charAt(1),r=e.charAt(2),n=e.charAt(3),e=e.charAt(4);return["#",t,t,r,r,n,n,e,e].join("")}function hslToRGBA(e){var t=e[0],r=e[1],n=e[2],r=(t<0&&(t+=360*Math.floor((Math.abs(t)+360)/360)),t%=360,(1-Math.abs(2*n-1))*r),i=r*(1-Math.abs(t/60%2-1)),n=n-r/2,t=t<60?[r,i,0]:t<120?[i,r,0]:t<180?[0,r,i]:t<240?[0,i,r]:t<300?[i,0,r]:t<360?[r,0,i]:[0,0,0];return[Math.round(255*(t[0]+n)),Math.round(255*(t[1]+n)),Math.round(255*(t[2]+n)),null!=(r=e[3])?r:1]}function stringToRGBA(e){if("#"===e.charAt(0))return 4===e.length||5===e.length?hexToRGBA(toFullHex(e)):hexToRGBA(e);if(-1!==e.indexOf("(")){var e=splitBracket(e),t=e.prefix,e=e.value;if(!t||!e)return;var r=splitComma(e),n=[0,0,0,1],i=r.length;switch(t){case RGB:case RGBA:for(var o=0;o<i;++o)n[o]=parseFloat(r[o]);return n;case HSL:case HSLA:for(o=0;o<i;++o)-1!==r[o].indexOf("%")?n[o]=parseFloat(r[o])/100:n[o]=parseFloat(r[o]);return hslToRGBA(n)}}}function $(e,t){return t?doc.querySelectorAll(e):doc.querySelector(e)}function hasClass(e,t){return e.classList?e.classList.contains(t):!!e.className.match(new RegExp("(\\s|^)"+t+"(\\s|$)"))}function addClass(e,t){e.classList?e.classList.add(t):e.className+=" "+t}function removeClass(e,t){e.classList?e.classList.remove(t):(t=new RegExp("(\\s|^)"+t+"(\\s|$)"),e.className=e.className.replace(t," "))}function fromCSS(e,t){if(!e||!t||!t.length)return{};var r;if(e instanceof Element)r=e;else{if(!e.length)return{};r=e[0]}for(var n={},i=window.getComputedStyle(r),o=t.length,s=0;s<o;++s)n[t[s]]=i[t[s]];return n}function addEvent(e,t,r,n){e.addEventListener(t,r,n)}function removeEvent(e,t,r,n){e.removeEventListener(t,r,n)}var __assign=function(){return(__assign=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function __spreadArrays$1(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;for(var n=Array(e),i=0,t=0;t<r;t++)for(var o=arguments[t],s=0,a=o.length;s<a;s++,i++)n[i]=o[s];return n}var EventEmitter=function(){function e(){this._events={}}var t=e.prototype;return t.on=function(e,t){if(isObject(e))for(var r in e)this.on(r,e[r]);else this._addEvent(e,t,{});return this},t.off=function(e,t){if(e)if(isObject(e))for(var r in e)this.off(r);else{var n,i;t?(n=this._events[e])&&-1<(i=findIndex(n,function(e){return e.listener===t}))&&n.splice(i,1):this._events[e]=[]}else this._events={};return this},t.once=function(t,e){var r=this;return e&&this._addEvent(t,e,{once:!0}),new Promise(function(e){r._addEvent(t,e,{once:!0})})},t.emit=function(t,r){var e,n=this,i=(void 0===r&&(r={}),this._events[t]);return!t||!i||(e=!1,r.eventType=t,r.stop=function(){e=!0},r.currentTarget=this,__spreadArrays$1(i).forEach(function(e){e.listener(r),e.once&&n.off(t,e.listener)}),!e)},t.trigger=function(e,t){return this.emit(e,t=void 0===t?{}:t)},t._addEvent=function(e,t,r){var n=this._events;n[e]=n[e]||[],n[e].push(__assign({listener:t},r))},e}(),EventEmitter$1=EventEmitter,OrderMap=function(){function o(e){this.separator=e,this.orderMap={}}var e=o.prototype;return e.getFullName=function(e){return e.join(this.separator)},e.get=function(e){return this.orderMap[this.getFullName(e)]},e.gets=function(e,t){var o=[],s=this;return function r(n,i){var e=s.get(n);if(e)return e.forEach(function(e){var t=i.concat([e]);(t=r(n.concat([e]),t))&&t.length||o.push(i.concat([e]))}),e}(e,(t=void 0===t?!0:t)?e:[]),o},e.set=function(r,e){var n=this;return r.forEach(function(e,t){n.addName(r.slice(0,t),e)}),this.orderMap[this.getFullName(r)]=e},e.add=function(e){var t=e.length;return t?this.addName(e.slice(0,-1),e[t-1]):[]},e.addName=function(e,t){e=this.get(e)||this.set(e,[]);return-1===e.indexOf(t)&&e.push(t),e},e.findIndex=function(e,t){e=this.orderMap[this.getFullName(e)];return e?e.indexOf(t):-1},e.remove=function(e){var t,r=this.getFullName(e),n=this.orderMap;for(t in n)0===t.indexOf(r)&&delete n[t];var i,o=e.length;return o&&(i=e.slice(0,-1),e=e[o-1],this.splice(i,this.findIndex(i,e),1)),this},e.filter=function(e,t,r){var t=this.gets(e,r=void 0===r?!0:r).filter(t),n=new o(this.separator),i=r?[]:e;return t.forEach(function(e){n.add(i.concat(e))}),n},e.splice=function(e,t,r){for(var n=[],i=3;i<arguments.length;i++)n[i-3]=arguments[i];e=this.get(e)||this.set(e,[]);return e.splice.apply(e,[t,r].concat(n)),this},e.clear=function(){this.orderMap={}},e.setObject=function(e){var t,r=this.orderMap;for(t in e)r[t]=e[t].slice()},e.getObject=function(){var e,t={},r=this.orderMap;for(e in r)t[e]=r[e].slice();return t},e.clone=function(){var e=new o(this.separator);return e.setObject(e.orderMap),e},o}(),OrderMap$1=OrderMap;function hash(e){for(var t=5381,r=e.length;r;)t=33*t^e.charCodeAt(--r);return t>>>0}var stringHash=hash;function getHash(e){return stringHash(e).toString(36)}function getShadowRoot(e){if(e&&e.getRootNode){e=e.getRootNode();if(11===e.nodeType)return e}}function replaceStyle(r,e,t){return t.original?e:e.replace(/([^};{\s}][^};{]*|^\s*){/gm,function(e,t){t=t.trim();return(t?splitComma(t):[""]).map(function(e){e=e.trim();return 0===e.indexOf("@")?e:-1<e.indexOf(":global")?e.replace(/\:global/g,""):-1<e.indexOf(":host")?""+e.replace(/\:host/g,"."+r):e?"."+r+" "+e:"."+r}).join(", ")+" {"})}function injectStyle(e,t,r,n){var i=document.createElement("style");return i.setAttribute("type","text/css"),i.setAttribute("data-styled-id",e),r.nonce&&i.setAttribute("nonce",r.nonce),i.innerHTML=replaceStyle(e,t,r),(n||document.head||document.body).appendChild(i),i}function styled(i){var o,s="rCS"+getHash(i),a=0;return{className:s,inject:function(e,t){void 0===t&&(t={});var r,n=getShadowRoot(e),e=0===a;return(n||e)&&(r=injectStyle(s,i,t,n)),e&&(o=r),n||++a,{destroy:function(){n?(n.removeChild(r),r=null):(0<a&&--a,0===a&&o&&(o.parentNode.removeChild(o),o=null))}}}}}var extendStatics$1=function(e,t){return(extendStatics$1=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}))(e,t)};function __extends$1(e,t){function r(){this.constructor=e}extendStatics$1(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}function __decorate(e,t,r,n){var i,o=arguments.length,s=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;0<=a;a--)(i=e[a])&&(s=(o<3?i(s):3<o?i(t,r,s):i(t,r))||s);return 3<o&&s&&Object.defineProperty(t,r,s),s}function __spreadArrays(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;for(var n=Array(e),i=0,t=0;t<r;t++)for(var o=arguments[t],s=0,a=o.length;s<a;s++,i++)n[i]=o[s];return n}function cubic(e,t,r){var n=1-r;return r*r*r+3*r*r*n*t+3*r*n*n*e}function solveFromX(e,t,r){for(var n=r,i=1;.001<Math.abs(i);){if(i=cubic(e,t,n)-r,Math.abs(i)<.001)return n;n-=i/2}return n}function bezier(t,r,n,i){function e(e){return e=solveFromX(t,n,between(e,0,1)),cubic(r,i,e)}return e.easingName="cubic-bezier("+t+","+r+","+n+","+i+")",e}function steps(r,n){function e(e){var t=1/r;return 1<=e?1:("start"===n?t:0)+Math.floor(e/t)*t}return e.easingName="steps("+r+", "+n+")",e}var _a,STEP_START=steps(1,"start"),STEP_END=steps(1,"end"),LINEAR=bezier(0,0,1,1),EASE=bezier(.25,.1,.25,1),EASE_IN=bezier(.42,0,1,1),EASE_OUT=bezier(0,0,.58,1),EASE_IN_OUT=bezier(.42,0,.58,1),PREFIX="__SCENEJS_",DATA_SCENE_ID="data-scene-id",TIMING_FUNCTION="animation-timing-function",ROLES={transform:{},filter:{},attribute:{},html:!0},ALIAS={easing:[TIMING_FUNCTION]},FIXED=((_a={})[TIMING_FUNCTION]=!0,_a.contents=!0,_a.html=!0,_a),MAXIMUM=1e6,THRESHOLD=1e-6,DURATION="duration",FILL_MODE="fillMode",DIRECTION="direction",ITERATION_COUNT="iterationCount",DELAY="delay",EASING="easing",PLAY_SPEED="playSpeed",EASING_NAME="easingName",ITERATION_TIME="iterationTime",PAUSED="paused",ENDED="ended",TIMEUPDATE="timeupdate",ANIMATE="animate",PLAY="play",RUNNING="running",ITERATION="iteration",START_ANIMATION="startAnimation",PAUSE_ANIMATION="pauseAnimation",ALTERNATE="alternate",REVERSE="reverse",ALTERNATE_REVERSE="alternate-reverse",NORMAL="normal",INFINITE="infinite",PLAY_STATE="playState",PLAY_CSS="playCSS",PREV_TIME="prevTime",TICK_TIME="tickTime",CURRENT_TIME="currentTime",SELECTOR="selector",TRANSFORM_NAME="transform",EASINGS={linear:LINEAR,ease:EASE,"ease-in":EASE_IN,"ease-out":EASE_OUT,"ease-in-out":EASE_IN_OUT,"step-start":STEP_START,"step-end":STEP_END},NAME_SEPARATOR="_///_",OPTIONS=[DURATION,FILL_MODE,DIRECTION,ITERATION_COUNT,DELAY,EASING,PLAY_SPEED],EVENTS=[PAUSED,ENDED,TIMEUPDATE,ANIMATE,PLAY,ITERATION],PropertyObject=function(){function o(e,t){this.prefix="",this.suffix="",this.model="",this.type="",this.separator=",",t&&this.setOptions(t),this.value=isString(e)?e.split(this.separator):e}var e=o.prototype;return e.setOptions=function(e){for(var t in e)this[t]=e[t];return this},e.size=function(){return this.value.length},e.get=function(e){return this.value[e]},e.set=function(e,t){return this.value[e]=t,this},e.clone=function(){var e=this,t=e.separator,r=e.prefix,n=e.suffix,i=e.model,e=e.type;return new o(this.value.map(function(e){return e instanceof o?e.clone():e}),{separator:t,prefix:r,suffix:n,model:i,type:e})},e.toValue=function(){return this.prefix+this.join()+this.suffix},e.join=function(){return this.value.map(function(e){return e instanceof o?e.toValue():e}).join(this.separator)},e.forEach=function(e){return this.value.forEach(e),this},o}();function splitStyle(e){for(var t=splitText(e,";"),r={},n=t.length,i=n,o=0;o<n;++o){var s=splitText(t[o],":");s.length<2||!s[1]?--i:r[s[0].trim()]=toPropertyObject(s[1].trim())}return{styles:r,length:i}}function arrayToColorObject(e){var t=RGBA;return 3===e.length&&(e[3]=1),new PropertyObject(e,{model:t,separator:",",type:"color",prefix:t+"(",suffix:")"})}function stringToBracketObject(e){var t,r,n=splitBracket(e),i=n.prefix,o=n.value,n=n.suffix;return void 0===o?e:-1<COLOR_MODELS.indexOf(i)?arrayToColorObject(stringToRGBA(e)):(e=[o],t=",",r=i+"(",n=")"+n,(o=toPropertyObject(o,i))instanceof PropertyObject&&(t=o.separator,e=o.value,r+=o.prefix,n=o.suffix+n),new PropertyObject(e,{separator:t,model:i,prefix:r,suffix:n}))}function arrayToPropertyObject(e,t){return new PropertyObject(e,{type:"array",separator:t})}function stringToColorObject(e){var t=stringToRGBA(e);return t?arrayToColorObject(t):e}function toPropertyObject(e,t){var r;return isString(e)?1<(r=splitComma(e)).length?arrayToPropertyObject(r.map(function(e){return toPropertyObject(e)}),","):1<(r=splitSpace(e)).length?arrayToPropertyObject(r.map(function(e){return toPropertyObject(e)})," "):(r=/^(['"])([^'"]*)(['"])$/g.exec(e))&&r[1]===r[3]?new PropertyObject([toPropertyObject(r[2])],{prefix:r[1],suffix:r[1]}):-1!==e.indexOf("(")?stringToBracketObject(e):"#"===e.charAt(0)&&"url"!==t?stringToColorObject(e):e:isArray(e)?arrayToPropertyObject(e,","):e}function toObject(e,t){void 0===t&&(t={});var r,n=e.model;return n?(e.setOptions({model:"",suffix:"",prefix:""}),r=1<e.size()?e:e.get(0),t[n]=r):e.forEach(function(e){toObject(e,t)}),t}function isPropertyObject(e){return e instanceof PropertyObject}function getType(e){var t=typeof e;if(t===OBJECT){if(isArray(e))return ARRAY;if(isPropertyObject(e))return PROPERTY}else if(t===STRING||t===NUMBER)return"value";return t}function isPureObject(e){return isObject(e)&&e.constructor===Object}function getNames(e,t){var r=[];if(isPureObject(e))for(var n in e)t.push(n),r=r.concat(getNames(e[n],t)),t.pop();else r.push(t.slice());return r}function updateFrame(e,t){for(var r in t)isPureObject(t[r])?(isObject(e[r])||(e[r]={}),updateFrame(e[r],t[r])):e[r]=!0;return e}function toFixed(e){return Math.round(e*MAXIMUM)/MAXIMUM}function getValueByNames(e,t,r){void 0===r&&(r=e.length);for(var n=t,i=0;i<r;++i){if(!isObject(n)||null==n)return;n=n[e[i]]}return n}function isInProperties(e,t,r){var n=t.length,i=e;if(0===n)return!1;for(var o=0;o<n;++o){if(!0===i)return!1;if(!(i=i[t[o]])||!r&&!0===i)return!1}return!0}function isRole(e,t){return isInProperties(ROLES,e,t)}function isFixed(e){return isInProperties(FIXED,e,!0)}function setPlayCSS(e,t){e.state[PLAY_CSS]=t}function isPausedCSS(e){return e.state[PLAY_CSS]&&e.isPaused()}function isEndedCSS(e){return!e.isEnded()&&e.state[PLAY_CSS]}function makeId(e){for(;;){var t=""+Math.floor(1e7*Math.random());if(!IS_WINDOW||!e)return t;if(!$('[data-scene-id="'+t+'"]'))return t}}function getRealId(e){return e.getId()||e.setId(makeId(!1)).getId()}function toId(e){return(""+e).match(/[0-9a-zA-Z]+/g).join("")}function playCSS(e,t,r,n){if(void 0===n&&(n={}),ANIMATION&&e.getPlayState()!==RUNNING){r=r||START_ANIMATION;if(isPausedCSS(e))e.addPlayClass(!0,r,n);else{e.isEnded()&&e.setTime(0),t&&e.exportCSS({className:r});t=e.addPlayClass(!1,r,n);if(!t)return;addAnimationEvent(e,t),setPlayCSS(e,!0)}e.setPlayState(RUNNING)}}function addAnimationEvent(r,e){function t(){setPlayCSS(r,!1),r.finish()}function n(){r.trigger(PLAY),addEvent(e,"animationcancel",t),addEvent(e,"animationend",t),addEvent(e,"animationiteration",a)}var i=r.state,o=r.getDuration(),s=!o||!isFinite(o),a=(r.once(ENDED,function(){removeEvent(e,"animationcancel",t),removeEvent(e,"animationend",t),removeEvent(e,"animationiteration",a),removeEvent(e,"animationstart",n)}),function(e){var e=e.elapsedTime,t=s?0:e/o;i[CURRENT_TIME]=e,r.setIteration(t)});addEvent(e,"animationstart",n)}function getEasing(e){var t;if(isString(e))if(e in EASINGS)t=EASINGS[e];else{var r=toPropertyObject(e);if(isString(r))return 0;if("cubic-bezier"===r.model)t=bezier((e=r.value.map(function(e){return parseFloat(e)}))[0],e[1],e[2],e[3]);else{if("steps"!==r.model)return 0;t=steps(parseFloat(r.value[0]),r.value[1])}}else t=isArray(e)?bezier(e[0],e[1],e[2],e[3]):e;return t}function isScene(e){return e&&!!e.constructor.prototype.getItem}function isFrame(e){return e&&!!e.constructor.prototype.toCSS}function flatSceneObject(e,t){var r,n={};for(r in e){var i=e[r];if(isFrame(i))n[r]=i;else if(isObject(i)){var o,s=flatSceneObject(i,t);for(o in s)n[""+r+t+o]=s[o]}}return n}function GetterSetter(t,n,i){return function(e){var r=e.prototype;t.forEach(function(e){r[camelize("get "+e)]=function(){return this[i][e]}}),n.forEach(function(t){r[camelize("set "+t)]=function(e){return this[i][t]=e,this}})}}function isDirectionReverse(e,t,r){return r===REVERSE||(t!==INFINITE&&e===t&&t%1==0?r===(1<=e%2?ALTERNATE_REVERSE:ALTERNATE):r===(1<=e%2?ALTERNATE:ALTERNATE_REVERSE))}var setters=["id",ITERATION_COUNT,DELAY,FILL_MODE,DIRECTION,PLAY_SPEED,DURATION,PLAY_SPEED,ITERATION_TIME,PLAY_STATE],getters=__spreadArrays(setters,[EASING,EASING_NAME]),Animator=function(r){function e(e){var t=r.call(this)||this;return t.timerId=0,t.state={id:"",easing:0,easingName:"linear",iterationCount:1,delay:0,fillMode:"forwards",direction:NORMAL,playSpeed:1,currentTime:0,iterationTime:-1,iteration:0,tickTime:0,prevTime:0,playState:PAUSED,duration:0},t.setOptions(e),t}__extends$1(e,r);var t=e.prototype;return t.setEasing=function(e){var e=getEasing(e),t=e&&e[EASING_NAME]||"linear",r=this.state;return r[EASING]=e,r[EASING_NAME]=t,this},t.setOptions=function(e){for(var t in e=void 0===e?{}:e){var r=e[t];t===EASING?this.setEasing(r):t===DURATION?r&&this.setDuration(r):-1<OPTIONS.indexOf(t)&&(this.state[t]=r)}return this},t.getTotalDuration=function(){return this.getActiveDuration(!0)},t.getActiveDuration=function(e){var t=this.state,r=t[ITERATION_COUNT];return r===INFINITE?1/0:(e?t[DELAY]:0)+this.getDuration()*r},t.isEnded=function(){return 0===this.state[TICK_TIME]&&this.state[PLAY_STATE]===PAUSED||!(this.getTime()<this.getActiveDuration())},t.isPaused=function(){return this.state[PLAY_STATE]===PAUSED},t.start=function(e){void 0===e&&(e=this.state[DELAY]);var t=this.state;return t[PLAY_STATE]=RUNNING,t[TICK_TIME]>=e&&(this.trigger(PLAY),!0)},t.play=function(t){var r=this,n=this.state,e=n[DELAY],i=this.getTime();return n[PLAY_STATE]=RUNNING,this.isEnded()&&(0===i||i>=this.getActiveDuration())&&this.setTime(-e,!0),this.timerId=requestAnimationFrame(function(e){n[PREV_TIME]=e,r.tick(e,t)}),this.start(),this},t.pause=function(){var e=this.state;return e[PLAY_STATE]!==PAUSED&&(e[PLAY_STATE]=PAUSED,this.trigger(PAUSED)),cancelAnimationFrame(this.timerId),this},t.finish=function(){return this.setTime(0),this.state[TICK_TIME]=0,this.end(),this},t.end=function(){return this.pause(),this.trigger(ENDED),this},t.setTime=function(e,t,r){var n=this.getActiveDuration(),i=this.state,o=i[TICK_TIME],s=i[DELAY],a=t?e:this.getUnitTime(e);if(i[TICK_TIME]=s+a,a<0?a=0:n<a&&(a=n),i[CURRENT_TIME]=a,this.calculate(),t&&!r){n=i[TICK_TIME];if(o<s&&0<=e&&this.start(0),n<o||this.isEnded())return void this.end()}return this.isDelay()||this.trigger(TIMEUPDATE,{currentTime:a,time:this.getIterationTime(),iterationCount:i[ITERATION]}),this},t.getTime=function(){return this.state[CURRENT_TIME]},t.getUnitTime=function(e){var t,r,n;return isString(e)?(t=this.getDuration()||100,"from"===e?0:"to"===e?t:(r=(n=splitUnit(e)).unit,n=n.value,"%"===r?(this.getDuration()||this.setDuration(t),toFixed(parseFloat(e)/100*t)):">"===r?n+THRESHOLD:n)):toFixed(e)},t.isDelay=function(){var e=this.state,t=e[DELAY],e=e[TICK_TIME];return 0<t&&e<t},t.setIteration=function(e){var t=this.state,r=Math.floor(e),n=t[ITERATION_COUNT]===INFINITE?1/0:t[ITERATION_COUNT];return t[ITERATION]<r&&r<n&&this.trigger(ITERATION,{currentTime:t[CURRENT_TIME],iterationCount:r}),t[ITERATION]=e,this},t.calculate=function(){var e,t=this.state,r=t[ITERATION_COUNT],n=t[FILL_MODE],t=t[DIRECTION],i=this.getDuration(),o=this.getTime(),s=0===i?0:o/i,o=i?o%i:0;return i?(this.setIteration(s),t=isDirectionReverse(s,r,t),(e=isFinite(i))&&t&&(o=i-o),e&&r!==INFINITE&&r<=s&&(o=i*("both"===n||"forwards"===n?r%1||1:0),t)&&(o=i-o),this.setIterationTime(o)):this.setIterationTime(0),this},t.tick=function(e,t){var r,n,i,o,s=this;this.isPaused()||(n=(r=this.state)[PLAY_SPEED],o=r[PREV_TIME],i=r[DELAY],o=r[TICK_TIME]+Math.min(1e3,e-o)/1e3*n,r[PREV_TIME]=e,this.setTime(o-i,!0),t&&1e3*t<e&&this.pause(),r[PLAY_STATE]!==PAUSED&&(this.timerId=requestAnimationFrame(function(e){s.tick(e,t)})))},__decorate([GetterSetter(getters,setters,"state")],e)}(EventEmitter$1);function toInnerProperties(t,e){var r,n;return void 0===e&&(e=[]),t?(r=[],sortOrders(n=getKeys(t),e),n.forEach(function(e){r.push(e.replace(/\d$/g,"")+"("+t[e]+")")}),r.join(" ")):""}function clone(e,t){return merge({},e,t=void 0===t?!1:t)}function merge(e,t,r){for(var n in void 0===r&&(r=!1),t){var i=t[n],o=getType(i);o===PROPERTY?e[n]=r?i.toValue():i.clone():o===FUNCTION?e[n]=r?getValue([n],i):i:o===ARRAY?e[n]=i.slice():o===OBJECT?isObject(e[n])&&!isPropertyObject(e[n])?merge(e[n],i,r):e[n]=clone(i,r):e[n]=t[n]}return e}function getPropertyName(e){return e[0]in ALIAS?ALIAS[e[0]]:e}function getValue(e,t){var r=getType(t);if(r===PROPERTY)return t.toValue();if(r===FUNCTION){if(e[0]!==TIMING_FUNCTION)return getValue(e,t())}else if(r===OBJECT)return clone(t,!0);return t}var Frame=function(){function u(e){void 0===e&&(e={}),this.properties={},this.orderMap=new OrderMap$1(NAME_SEPARATOR),this.properties={},this.set(e)}var e=u.prototype;return e.get=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=this.raw.apply(this,e);return getValue(getPropertyName(e),r)},e.getOrders=function(e){return this.orderMap.get(e)},e.setOrders=function(e,t){return this.orderMap.set(e,t)},e.getOrderObject=function(){return this.orderMap.getObject()},e.setOrderObject=function(e){this.orderMap.setObject(e)},e.getKeys=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=this.raw.apply(this,e),r=getType(r)===OBJECT?getKeys(r):[];return sortOrders(r,this.orderMap.get(e)),r},e.gets=function(){for(var t=this,r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];var n=this.get.apply(this,r);return this.getKeys.apply(this,r).map(function(e){return{key:e,value:n[e],children:t.gets.apply(t,__spreadArrays(r,[e]))}})},e.raw=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return getValueByNames(getPropertyName(e),this.properties)},e.remove=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r,n=getPropertyName(e),i=n.length;return i&&(this.orderMap.remove(n),isObject(r=getValueByNames(n,this.properties,i-1)))&&delete r[n[i-1]],this},e.set=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=this,n=e.length,i=e.slice(0,-1),o=e[n-1],s=i[0];if(1===n&&o instanceof u)r.merge(o);else if(s in ALIAS)r._set(ALIAS[s],o);else if(2===n&&isArray(s))r._set(s,o);else if(isPropertyObject(o))isRole(i)?r.set.apply(r,__spreadArrays(i,[toObject(o)])):r._set(i,o);else if(isArray(o))r._set(i,o);else if(isObject(o))for(var a in!r.has.apply(r,i)&&isRole(i)&&r._set(i,{}),o)r.set.apply(r,__spreadArrays(i,[a,o[a]]));else{if(isString(o)){if(isRole(i,!0))return isFixed(i)||!isRole(i)?this._set(i,o):isObject(n=toPropertyObject(o))&&r.set.apply(r,__spreadArrays(i,[n])),this;var s=splitStyle(o),c=s.styles,n=s.length;for(a in c)r.set.apply(r,__spreadArrays(i,[a,c[a]]));if(n)return this}r._set(i,o)}return r},e.getNames=function(){return getNames(this.properties,[])},e.has=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=getPropertyName(e),n=r.length;return!!n&&!isUndefined(getValueByNames(r,this.properties,n))},e.clone=function(){var e=new u;return e.setOrderObject(this.orderMap.orderMap),e.merge(this)},e.merge=function(e){var t=this.properties,e=e.properties;return e&&merge(t,e),this},e.toCSSObject=function(){var e,t,r=this.get(),n={};for(e in r)isRole([e],!0)||(t=r[e],e===TIMING_FUNCTION?n[TIMING_FUNCTION.replace("animation",ANIMATION)]=(isString(t)?t:t[EASING_NAME])||"initial":n[e]=t);var i=toInnerProperties(r[TRANSFORM_NAME],this.orderMap.get([TRANSFORM_NAME])),o=toInnerProperties(r.filter,this.orderMap.get([FILTER]));return TRANSFORM&&i&&(n[TRANSFORM]=i),FILTER&&o&&(n[FILTER]=o),n},e.toCSS=function(){var t=this.toCSSObject(),r=[],e=getKeys(t);return sortOrders(e,this.orderMap.get([])),e.forEach(function(e){r.push(e+":"+t[e]+";")}),r.join("")},e.clear=function(){return this.properties={},this.orderMap.clear(),this},e._set=function(e,t){for(var r,n=this.properties,i=e.length,o=0;o<i-1;++o){var s=e[o];s in n||(n[s]={}),n=n[s]}i&&(r=e[i-1],this.orderMap.add(e),n[r]=1===i&&r===TIMING_FUNCTION?getEasing(t):isString(t)&&!isFixed(e)?toPropertyObject(t,r):t)},u}();function dotArray(e,r,n,i){var o=r.length;return e.map(function(e,t){return o<=t?e:dot(e,r[t],n,i)})}function dotColor(e,t,r,n){var i=e.value,o=t.value,s=e.model;if(s!==t.model)return dot(e.toValue(),t.toValue(),r,n);3===i.length&&(i[3]=1),3===o.length&&(o[3]=1);for(var a=dotArray(i,o,r,n),e=s,c=0;c<3;++c)a[c]=parseInt(a[c],10);return new PropertyObject(a,{type:"color",model:e,prefix:e+"(",suffix:")"})}function dotObject(e,t,r,n){var i=e.type;return"color"===i?dotColor(e,t,r,n):(r=dotArray(e.value,t.value,r,n),new PropertyObject(r,{type:i,separator:e.separator||t.separator,prefix:e.prefix||t.prefix,suffix:e.suffix||t.suffix,model:e.model||t.model}))}function dot(e,t,r,n){var i,o,s,a,c,u;return 0===n?t:0===r||r+n===0?e:(s=getType(e),u=getType(t),o=u===FUNCTION,(i=s===FUNCTION)||o?function(){return dot(i?toPropertyObject(e()):e,o?toPropertyObject(t()):t,r,n)}:s!==u?e:s===PROPERTY?dotObject(e,t,r,n):s===ARRAY?dotArray(e,t,r,n):"value"!==s||(u=splitUnit(""+e),s=splitUnit(""+t),isNaN(u.value))||isNaN(s.value)?e:(a=dot$1(u.value,s.value,r,n),c=u.prefix||s.prefix,u=u.unit||s.unit,c||u?c+a+u:a))}function dotValue(e,t,r,n,i,o){return e===t?n:e===r?i:o?dot(n,i,o=o((e-t)/(r-t)),1-o):dot(n,i,e-t,r-e)}function getNearTimeIndex(e,t){for(var r=e.length,n=0;n<r;++n){if(e[n]===t)return[n,n];if(e[n]>t)return[0<n?n-1:0,n]}return[r-1,r-1]}function makeAnimationProperties(e){var t,r=[];for(t in e)r.push(ANIMATION+"-"+decamelize(t)+":"+e[t]+";");return r.join("")}function addTime(e,t){for(var r=e.length,n=0;n<r;++n)if(t<e[n])return void e.splice(n,0,t);e[r]=t}function addEntry(e,t,r){var n=e[e.length-1];n&&n[0]===t&&n[1]===r||e.push([toFixed(t),toFixed(r)])}function getEntries(e,t){var y=e.map(function(e){return[e,e]}),v=[];return t.forEach(function(e){for(var t=e[ITERATION_COUNT],r=e[DELAY],n=e[PLAY_SPEED],i=e[DIRECTION],o=Math.ceil(t),s=y[y.length-1][0],a=y.length,c=s*t,u=0;u<o;++u)for(var f=i===REVERSE||i===ALTERNATE&&u%2||i===ALTERNATE_REVERSE&&!(u%2),p=0;p<a;++p){var l,d=y[f?a-p-1:p],h=d[1],d=s*u+(f?s-d[0]:d[0]),m=y[f?a-p:p-1];if(c<d){0!==p&&(l=s*u+(f?s-m[0]:m[0]),m=dot$1(m[1],h,c-l,d-c),addEntry(v,(r+s*t)/n,m));break}if(d===c&&v.length&&v[v.length-1][0]===c+r)break;addEntry(v,(r+d)/n,h)}r&&v.unshift([0,v[0][1]]),y=v,v=[]}),y}var SceneItem=function(o){function f(e,t){var r=o.call(this)||this;return r.times=[],r.items={},r.nameMap=new OrderMap$1(NAME_SEPARATOR),r.elements=[],r.needUpdate=!0,r.load(e,t),r}__extends$1(f,o);var e=f.prototype;return e.getDuration=function(){var e=this.times,t=e.length;return(0===t?0:e[t-1])||this.state[DURATION]},e.size=function(){return this.times.length},e.setDuration=function(e){var r,t,n,i;return e&&(0<(t=this.getDuration())?(r=e/t,t=this.times,n=this.items,i={},this.times=t.map(function(e){var t=toFixed(e*r);return i[t]=n[e],t}),this.items=i):this.newFrame(e)),this},e.setId=function(e){var t,r=this.state,n=this.elements,i=n.length;return r.id=e||makeId(!!i),i&&!r[SELECTOR]&&(t=toId(this.getId()),r[SELECTOR]="["+DATA_SCENE_ID+'="'+t+'"]',n.forEach(function(e){e.setAttribute(DATA_SCENE_ID,t)})),this},e.set=function(t){for(var a,c=this,u=[],e=1;e<arguments.length;e++)u[e-1]=arguments[e];if(t instanceof f)return this.set(0,t);if(isArray(t))for(var r=t.length,n=0;n<r;++n){var i=1===r?0:this.getUnitTime(n/(r-1)*100+"%");this.set(i,t[n])}else if(isObject(t))for(i in t)!function(e){var s=t[e];splitComma(e).forEach(function(e){var t=c.getUnitTime(e);isNaN(t)?getNames(s,[e]).forEach(function(e){for(var t,r=getValueByNames(e.slice(1),s),n=isArray(r)?r:[getValueByNames(e,c.target),r],i=n.length,o=0;o<i;++o)(t=c.newFrame(o/(i-1)*100+"%")).set.apply(t,__spreadArrays(e,[n[o]]))}):c.set(t,s)})}(i);else isUndefined(t)||(a=u[0],splitComma(t+"").forEach(function(e){var t=c.getUnitTime(e);if(a instanceof f){var r,e=a.getDelay(),n=a.toObject(!c.hasFrame(t+e)),i=a.getDuration(),o=-1<a.getDirection().indexOf("reverse");for(r in n){var s=o?i-parseFloat(r):parseFloat(r);c.set(t+s,n[r])}}else 1===u.length&&isArray(a)?a.forEach(function(e){c.set(t,e)}):(e=c.newFrame(t)).set.apply(e,u)}));return this.needUpdate=!0,this},e.get=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];e=this.getFrame(e);return e&&e.get.apply(e,t)},e.getOrders=function(e){return this.needUpdate&&this.update(),this.nameMap.get(e)},e.setOrders=function(e,t){this.needUpdate&&this.update();e=this.nameMap.set(e,t);return this.updateFrameOrders(),e},e.getOrderObject=function(){return this.nameMap.getObject()},e.setOrderObject=function(e){this.nameMap.setObject(e),this.updateFrameOrders()},e.remove=function(e){for(var t,r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];return r.length?(t=this.getFrame(e))&&t.remove.apply(t,r):this.removeFrame(e),this.needUpdate=!0,this},e.append=function(e){return e instanceof f?this.set(this.getDuration(),e):this.append(new f(e)),this},e.prepend=function(e){var t,r;return e instanceof f?(t=e.getDuration()+e.getDelay(),r=this.getFrame(0),this.removeFrame(0),this.unshift(t),this.set(0,e),this.set(t+THRESHOLD,r)):this.prepend(new f(e)),this},e.unshift=function(r){var e=this.times,n=this.items,i={};return this.times=e.map(function(e){var t=toFixed(r+e);return i[t]=n[e],t}),this.items=i,this},e.toObject=function(r){void 0===r&&(r=!0);var n={},i=this.getDelay();return this.forEach(function(e,t){n[(t||r?0:THRESHOLD)+i+t]=e.clone()}),n},e.setSelector=function(e){return isFunction(e)?this.setElement(e(this.getId())):this.setElement(e),this},e.getElements=function(){return this.elements},e.setElements=function(e){return this.setElement(e)},e.setElement=function(e){var t,r,o=this.state,s=[];return e&&(!0===e||isString(e)?(t=!0===e?""+o.id:e,r=/([\s\S]+)(:+[a-zA-Z]+)$/g.exec(t),s=toArray($(r?r[1]:t,!0)),o[SELECTOR]=t):s=e instanceof Element?[e]:toArray(e),s.length)&&(this.elements=s,this.setId(this.getId()),this.target=s[0].style,this.targetFunc=function(e){var t,r=e.get("attribute");if(r)for(var n in r)!function(t){s.forEach(function(e){e.setAttribute(t,r[t])})}(n);e.has("html")&&(t=e.get("html"),s.forEach(function(e){e.innerHTML=t}));var i=e.toCSS();if(o.cssText!==i)return o.cssText=i,s.forEach(function(e){e.style.cssText+=i}),e}),this},e.setTarget=function(n){return this.target=n,this.targetFunc=function(e){var t,r=e.get();for(t in r)n[t]=r[t]},this},e.setCSS=function(e,t){return this.set(e,fromCSS(this.elements,t=void 0===t?[]:t)),this},e.setTime=function(e,t,r,n){o.prototype.setTime.call(this,e,t,r);e=this.getIterationTime(),t=this.getEasing()||n,r=this.getNowFrame(e,t),n=this.getTime();return this.temp=r,this.trigger("animate",{frame:r,currentTime:n,time:e}),this.targetFunc&&this.targetFunc(r),this},e.update=function(){var t=this.nameMap,r={},o=(this.forEach(function(e){updateFrame(r,e.properties)}),new OrderMap$1(NAME_SEPARATOR));return function r(n,i){var e=getKeys(n);sortOrders(e,t.get(i)),o.set(i,e),e.forEach(function(e){var t=n[e];isObject(t)&&r(t,__spreadArrays(i,[e]))})}(r,[]),this.nameMap=o,this.forEach(function(e){e.setOrderObject(o.orderMap)}),this.needUpdate=!1,this},e.newFrame=function(e){var t=this.getFrame(e);return t||(t=new Frame,this.setFrame(e,t)),t},e.setFrame=function(e,t){e=this.getUnitTime(e);return this.items[e]=t,addTime(this.times,e),this.needUpdate=!0,this},e.getFrame=function(e){return this.items[this.getUnitTime(e)]},e.removeFrame=function(e){var e=this.getUnitTime(e),t=this.items,r=this.times.indexOf(e);return delete t[e],-1<r&&this.times.splice(r,1),this.needUpdate=!0,this},e.hasFrame=function(e){return this.getUnitTime(e)in this.items},e.hasName=function(e){return this.needUpdate&&this.update(),!!this.nameMap.get(e)},e.mergeFrame=function(e,t){return t&&this.newFrame(e).merge(t),this},e.getNowFrame=function(r,e,n){var i=this,o=(this.needUpdate&&this.update(),new Frame),t=getNearTimeIndex(this.times,r),s=t[0],a=t[1],c=this.getEasing()||e,u=this.nameMap;if(this.hasName([TIMING_FUNCTION])&&isFunction(t=this.getNowValue(r,[TIMING_FUNCTION],s,a,!1,0,!0))&&(c=t),n){var f,p=this.getFrame(r),l=p.orderMap.filter([],function(e){return p.has.apply(p,e)});for(f in ROLES){var d=u.get([f]);l.get([f])&&d&&l.set([f],d)}u=l}e=u.gets([]);return o.setOrderObject(u.orderMap),e.forEach(function(e){var t=i.getNowValue(r,e,s,a,n,c,isFixed(e));isUndefined(t)||o.set(e,t)}),o},e.getCurrentFrame=function(e,t){var r=this.getIterationTime(),e=e||this.needUpdate||!this.temp?this.getComputedFrame(r,t):this.temp;return this.temp=e},e.getComputedFrame=function(e,t,r){return this.getNowFrame(e,t,r)},e.load=function(e,t){var r;if(void 0===e&&(e={}),(t=void 0===t?e.options:t)&&this.setOptions(t),isArray(e))this.set(e);else if(e.keyframes)this.set(e.keyframes);else for(var n in e)"options"!==n&&this.set(((r={})[n]=e[n],r));return t&&t[DURATION]&&this.setDuration(t[DURATION]),this},e.clone=function(){var r=new f;return r.setOptions(this.state),r.setOrderObject(this.nameMap.orderMap),this.forEach(function(e,t){r.setFrame(t,e.clone())}),r},e.forEach=function(t){var e=this.times,r=this.items;return e.forEach(function(e){t(r[e],e,r)}),this},e.setOptions=function(e){o.prototype.setOptions.call(this,e=void 0===e?{}:e);var t=e.id,r=e.selector,n=e.elements,i=e.element,e=e.target;return t&&this.setId(t),e?this.setTarget(e):r?this.setSelector(r):(n||i)&&this.setElement(n||i),this},e.toCSS=function(e,t,r){void 0===e&&(e={className:START_ANIMATION}),void 0===t&&(t=this.getDuration()),void 0===r&&(r=[]);var n,i,o,s,a,c,u,f=this.state,p=f[SELECTOR];return p?(u=this.getDuration(),f[DURATION]=u,r.push(f),s=toArray(r).reverse(),n=toId(getRealId(this)),i=r[0],r=findIndex(s,function(e){return e[ITERATION_COUNT]===INFINITE||!isFinite(e[DURATION])},r.length-1),o=s.slice(0,r),t=t||o.reduce(function(e,t){return(t[DELAY]+e*t[ITERATION_COUNT])/t[PLAY_SPEED]},u),u=s.slice(r).reduce(function(e,t){return(e+t[DELAY])/t[PLAY_SPEED]},0),f=find(s,function(e){return e[EASING]&&e[EASING_NAME]},f)[EASING_NAME],a=s[r][ITERATION_COUNT],r=makeAnimationProperties({fillMode:i[FILL_MODE],direction:s=s[r][DIRECTION],iterationCount:a,delay:u+"s",name:PREFIX+"KEYFRAMES_"+n,duration:t/i[PLAY_SPEED]+"s",timingFunction:f}),a=splitComma(p).map(function(e){var t=/([\s\S]+)(:+[a-zA-Z]+)$/g.exec(e);return t?[t[1],t[2]]:[e,""]}),c=e.className,"\n    "+((isFunction(u=e.selector)?u(this,p):u)||a.map(function(e){var t=e[0],e=e[1];return t+"."+c+e}))+" {"+r+"}\n    "+a.map(function(e){var t=e[0],e=e[1];return t+"."+PAUSE_ANIMATION+e})+" {"+ANIMATION+"-play-state: paused;}\n    @"+KEYFRAMES+" "+PREFIX+"KEYFRAMES_"+n+"{"+this._toKeyframes(t,o,s)+"}"):""},e.exportCSS=function(e,t,r){return this.elements.length?(e=this.toCSS(e,t,r),r&&!isUndefined(r[ITERATION_COUNT])||(this.styledInjector&&(this.styledInjector.destroy(),this.styledInjector=null),this.styled=styled(e),this.styledInjector=this.styled.inject(this.getAnimationElement(),{original:!0})),this):""},e.pause=function(){return o.prototype.pause.call(this),isPausedCSS(this)&&this.pauseCSS(),this},e.pauseCSS=function(){return this.elements.forEach(function(e){addClass(e,PAUSE_ANIMATION)}),this},e.endCSS=function(){return this.elements.forEach(function(e){removeClass(e,PAUSE_ANIMATION),removeClass(e,START_ANIMATION)}),setPlayCSS(this,!1),this},e.end=function(){return isEndedCSS(this)&&this.endCSS(),o.prototype.end.call(this),this},e.playCSS=function(e,t,r){return playCSS(this,e=void 0===e?!0:e,t,r=void 0===r?{}:r),this},e.getAnimationElement=function(){return this.elements[0]},e.addPlayClass=function(e,t,r){var n=this.elements,i=n.length,o=makeAnimationProperties(r=void 0===r?{}:r);if(i)return e?n.forEach(function(e){removeClass(e,PAUSE_ANIMATION)}):(n.forEach(function(e){e.style.cssText+=o,hasClass(e,START_ANIMATION)&&removeClass(e,START_ANIMATION)}),n.forEach(function(e){e.clientWidth}),n.forEach(function(e){addClass(e,START_ANIMATION)})),n[0]},e.clear=function(){return this.times=[],this.items={},this.nameMap=new OrderMap$1(NAME_SEPARATOR),this.styledInjector&&this.styledInjector.destroy(),this.styled=null,this.styledInjector=null,this.temp=null,this.needUpdate=!0,this},e.getNowValue=function(e,t,r,n,i,o,s){var a,c,u,f,p,l=this.times,d=l.length,h=isUndefined(r),m=isUndefined(n);(h||m)&&(p=getNearTimeIndex(l,e),h&&(r=p[0]),m)&&(n=p[1]);for(var y=r;0<=y;--y)if((v=this.getFrame(l[y])).has.apply(v,t)){a=l[y],u=v;break}h=u&&u.raw.apply(u,t);if(i&&!isRole([t[0]]))return a===e?h:void 0;if(s)return h;for(var v,y=n;y<d;++y)if((v=this.getFrame(l[y])).has.apply(v,t)){c=l[y],f=v;break}m=f&&f.raw.apply(f,t);return!u||isUndefined(h)?m:!f||isUndefined(m)||h===m?h:dotValue(e,Math.max(a,0),c,h,m,o)},e._toKeyframes=function(n,e,i){var o,s,a=this,c={},t=this.times.slice();return t.length?(o=this.getDuration(),this.getFrame(0)||t.unshift(0),this.getFrame(o)||t.push(o),(e=(t=getEntries(t,e))[t.length-1])[0]<n&&addEntry(t,n,e[1]),s=-1,t.map(function(e){var t=e[0],e=e[1],r=(c[e]||(c[e]=(a.hasFrame(e)&&0!==e&&e!==o?a.getNowFrame(e,0,!0):a.getNowFrame(e)).toCSS()),t/n*100);return r-s<THRESHOLD&&(r+=THRESHOLD),s=r,Math.min(r,100)+"%{\n                "+(0!==t||isDirectionReverse(0,1,i)?c[e]:"")+"\n            }"}).join("")):""},e.updateFrameOrders=function(){var t=this.nameMap.orderMap;this.forEach(function(e){e.setOrderObject(t)})},f}(Animator),Scene$1=function(s){function f(e,t){var r=s.call(this)||this;return r.items={},r.orderMap=new OrderMap$1(NAME_SEPARATOR),r.load(e,t),r}__extends$1(f,s);var e=f.prototype;return e.getDuration=function(){var t=0;return this.forEach(function(e){t=Math.max(t,e.getTotalDuration()/e.getPlaySpeed())}),t||this.state[DURATION]},e.setDuration=function(t){this.items;var r,e=this.getDuration();return 0!==t&&isFinite(e)&&(0===e?this.forEach(function(e){e.setDuration(t)}):(r=t/e,this.forEach(function(e){e.setDelay(e.getDelay()*r),e.setDuration(e.getDuration()*r)})),s.prototype.setDuration.call(this,t)),this},e.getItem=function(e){return this.items[e]},e.newItem=function(e,t){var r;return void 0===t&&(t={}),this.items[e]||(r=new SceneItem,this.setItem(e,r),r.setOptions(t),r)},e.removeItem=function(e){return delete this.items[e],this.orderMap.remove([e]),this},e.setItem=function(e,t){return t.setId(e),this.items[e]=t,this.orderMap.add([e]),this},e.getCurrentFrames=function(r,e){var n=this.getEasing()||e,i={};return this.forEach(function(e){var t=e.getId();isScene(e)?i[t]=e.getCurrentFrames(r,n):i[t]=e.getCurrentFrame(r,n)}),this.temp=i},e.getCurrentFlattedFrames=function(e,t){return flatSceneObject(this.getCurrentFrames(e,t),NAME_SEPARATOR)},e.setTime=function(e,t,r,n){s.prototype.setTime.call(this,e,t,r);var i=this.getIterationTime(),o=this.getEasing()||n,e=(this.forEach(function(e){e.setTime(i*e.getPlaySpeed()-e.getDelay(),t,!0,o)}),this.getCurrentFrames(!1,n));return this.trigger("animate",{frames:e,currentTime:this.getTime(),time:i}),this},e.forEach=function(r){var n=this.items;return this.getOrders().forEach(function(e,t){r(n[e],e,t,n)}),this},e.toCSS=function(t,e,r){void 0===e&&(e=this.getDuration()),void 0===r&&(r=[]);var n=e&&isFinite(e)?e:0,i=[],o=this.state;return o[DURATION]=this.getDuration(),this.forEach(function(e){i.push(e.toCSS(t,n,r.concat(o)))}),i.join("")},e.exportCSS=function(e,t,r){e=this.toCSS(e,t,r);return r&&r.length||(this.styledInjector&&(this.styledInjector.destroy(),this.styledInjector=null),this.styled=styled(e),this.styledInjector=this.styled.inject(this.getAnimationElement(),{original:!0})),this},e.append=function(e){e.setDelay(e.getDelay()+this.getDuration()),this.setItem(getRealId(e),e)},e.pauseCSS=function(){return this.forEach(function(e){e.pauseCSS()})},e.pause=function(){return s.prototype.pause.call(this),isPausedCSS(this)&&this.pauseCSS(),this.forEach(function(e){e.pause()}),this},e.endCSS=function(){this.forEach(function(e){e.endCSS()}),setPlayCSS(this,!1)},e.end=function(){return isEndedCSS(this)&&this.endCSS(),s.prototype.end.call(this),this},e.getOrders=function(){return this.orderMap.get([])||[]},e.setOrders=function(e){return this.orderMap.set([],e)},e.getAnimationElement=function(){var t;return this.forEach(function(e){e=e.getAnimationElement();t=t||e}),t},e.addPlayClass=function(t,r,n){var i;return void 0===n&&(n={}),this.forEach(function(e){e=e.addPlayClass(t,r,n);i=i||e}),i},e.playCSS=function(e,t,r){return playCSS(this,e=void 0===e?!0:e,t,r=void 0===r?{}:r),this},e.set=function(e){return this.load(e),this},e.clear=function(){this.finish(),this.items={},this.orderMap=new OrderMap$1(NAME_SEPARATOR),this.styledInjector&&this.styledInjector.destroy(),this.styled=null,this.styledInjector=null},e.load=function(e,t){if(void 0===e&&(e={}),void 0===t&&(t=e.options),!e)return this;var r,n=t&&t[SELECTOR]||this.state[SELECTOR];for(r in e)if("options"!==r){var i=e[r],o=void 0;if(i instanceof f||i instanceof SceneItem)this.setItem(r,i),o=i;else{if(isFunction(i)&&n){for(var s=IS_WINDOW?$(""+(isFunction(n)?n(r):r),!0):[],a=s.length,c=new f,u=0;u<a;++u)c.newItem(u).setId().setElement(s[u]).load(i(u,s[u]));this.setItem(r,c);continue}(o=this.newItem(r)).load(i)}n&&o.setSelector(n)}this.setOptions(t)},e.setOptions=function(e){s.prototype.setOptions.call(this,e=void 0===e?{}:e);e=e.selector;return e&&(this.state[SELECTOR]=e),this},e.setSelector=function(r){var e=this.state,n=r||e[SELECTOR],i=(e[SELECTOR]=n,isFunction(r));return n&&this.forEach(function(e,t){e.setSelector(i?r(t):n)}),this},e.start=function(e){void 0===e&&(e=this.state[DELAY]);e=s.prototype.start.call(this,e);return e?this.forEach(function(e){e.start(0)}):this.forEach(function(e){e.setPlayState(RUNNING)}),e},f.VERSION="1.6.0",f}(Animator),NativeScene=Scene$1,extendStatics=function(e,t){return(extendStatics=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])}))(e,t)};function __extends(e,t){function r(){this.constructor=e}extendStatics(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}var SceneInterface=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={ready:!1},t.events={play:function(e){return t.props.onPlay(e)},paused:function(e){return t.props.onPaused(e)},ended:function(e){return t.props.onEnded(e)},timeupdate:function(e){return t.props.onTimeUpdate(e)},iteration:function(e){return t.props.onIteration(e)},animate:function(e){return t.props.onAnimate(e)}},t}__extends(t,e);var r=t.prototype;return r.render=function(){return this.props.children},r.componentDidUpdate=function(){this.props.ready&&!this.state.ready&&this.init(),-1===this.props.time||!1!==this.props.autoplay&&"paused"!==this.item.getPlayState()||this.item.setTime(this.props.time)},r.componentWillUnmount=function(){this.item.off()},r.setTime=function(e){this.item.setTime(e)},r.getTime=function(){return this.item.getTime()},r.play=function(){!1!==this.props.css?this.item.playCSS():this.item.play()},r.pause=function(){this.item.pause()},r.isPaused=function(){return this.item.isPaused()},r.getItem=function(){return this.item},r.getDuration=function(){return this.item.getDuration()},r.init=function(){var t,r,n=this,e=this.state;this.props.ready&&!e.ready&&(e.ready=!0,e=this.item,t=this.events,r={},this.props.keyframes&&this.item.load(this.props.keyframes),OPTIONS.forEach(function(e){r[e]=n.props[e]}),e.setOptions(r),EVENTS.forEach(function(e){n.item.on(e,t[e])}),!1!==this.props.autoplay?this.play():-1!==this.props.time?this.setTime(this.props.time):this.setTime(0))},t.defaultProps={duration:0,fillMode:"forwards",direction:"normal",playSpeed:1,iterationCount:1,delay:0,easing:0,time:-1,css:!1,autoplay:!1,ready:!0,onPlay:function(){},onPaused:function(){},onEnded:function(){},onTimeUpdate:function(){},onIteration:function(){},onAnimate:function(){}},t}(React.PureComponent),Scene=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.item=new NativeScene({},{selector:!0}),e}__extends(e,t);var r=e.prototype;return r.render=function(){return this.props.children},r.componentDidMount=function(){this.init()},e}(SceneInterface),css_248z=".RainDrop .raindrops {\n  pointer-events: none; }\n  .RainDrop .raindrops .raindrop {\n    position: absolute;\n    width: 300px;\n    height: 300px;\n    left: 0;\n    right: 0;\n    top: 0;\n    bottom: 0;\n    margin: auto;\n    border: 100px solid black;\n    border-radius: 50%;\n    box-sizing: border-box;\n    transform: scale(0); }\n",RainDrop=(styleInject(css_248z),function(e){e.name,e.id;var t=e.keyframes,r=e.playSpeed,e=e.delay;return React.createElement("div",{"data-testid":"RainDrop",className:"RainDrop"},React.createElement(Scene,{keyframes:t,easing:"ease-in-out",fillMode:"forwards",direcition:"normal",iterationCount:"infinite",playSpeed:r,delay:e,autoplay:!0,ready:!0},React.createElement("div",{className:"raindrops"},React.createElement("div",{className:"raindrop circle1"}),React.createElement("div",{className:"raindrop circle2"}),React.createElement("div",{className:"raindrop circle3"}))))});function ownKeys(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function _objectSpread(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?ownKeys(Object(r),!0).forEach(function(e){_defineProperty(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}RainDrop.defaultProps={name:"animation",id:1,keyframes:{},playSpeed:1,delay:0},RainDrop.propTypes={name:propTypes.exports.string,id:propTypes.exports.number,keyframes:propTypes.exports.object,playSpeed:propTypes.exports.number,delay:propTypes.exports.number};var Animations={raindrop:RainDrop},Animations$1=function(e){return void 0!==Animations[e.name]?React.createElement(Animations[e.name],_objectSpread({key:e.id},e)):React.createElement(function(){return React.createElement("div",null,"The animation ",e.name," has not been created yet.")},{key:e.id})},Canvas=function(e){var t=e.slides,r=e.width,e=e.height,n=React.useRef(null),i=useWindowDimensions(n,r,e),o=i.height,s=i.width,i=i.scale,a=_slicedToArray(React.useState(.1),2);return a[0],a[1],React.createElement("div",{id:"canvasContainer"},React.createElement("div",{className:"Canvas",id:"recorderCanvas",ref:n},React.createElement("div",{className:"CanvasInner",style:{width:s,height:o}},React.createElement("div",{className:"Composition",style:{width:r,height:e,transform:"translate(-50%, -50%) scale(".concat(i,")")}},React.createElement("div",{className:"Layer",style:{width:r,height:e}},t.map(function(e,t){return Animations$1(e)}))))))};Canvas.propTypes={slides:propTypes.exports.array,width:propTypes.exports.number,height:propTypes.exports.number},exports.Canvas=Canvas;
//# sourceMappingURL=index.js.map
