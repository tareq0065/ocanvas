{"version":3,"file":"index.esm.js","sources":["../node_modules/style-inject/dist/style-inject.es.js","../util/useJsCanvas.js","../src/components/Layer.js","../src/media/Media.js","../src/media/index.js","../src/jscanvas.js","../src/components/AudioLayer.js","../util/useWindowDimensions.js","../src/Canvas/Canvas.js"],"sourcesContent":["function styleInject(css, ref) {\n  if ( ref === void 0 ) ref = {};\n  var insertAt = ref.insertAt;\n\n  if (!css || typeof document === 'undefined') { return; }\n\n  var head = document.head || document.getElementsByTagName('head')[0];\n  var style = document.createElement('style');\n  style.type = 'text/css';\n\n  if (insertAt === 'top') {\n    if (head.firstChild) {\n      head.insertBefore(style, head.firstChild);\n    } else {\n      head.appendChild(style);\n    }\n  } else {\n    head.appendChild(style);\n  }\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nexport default styleInject;\n","import { createContext, useEffect, useState } from 'react';\nimport Scene from 'scenejs';\n\nconst JsCanvasContext = createContext(null);\n\nexport { JsCanvasContext };\n","import React, { useContext, useEffect, useReducer } from 'react';\nimport PropTypes from 'prop-types';\nimport '../Canvas/Canvas.css';\nimport { JsCanvasContext } from '../../util/useJsCanvas';\n\nconst Layer = ({\n\tchildren,\n\tname,\n\tid,\n\tratio,\n\tkeyframes,\n\tstyle,\n\tplaySpeed,\n\tdelay,\n\titeration,\n}) => {\n\tconst jsCanvas = useContext(JsCanvasContext);\n\tconst baseName = name.replaceAll(' ', '_') + id;\n\n\tuseEffect(() => {\n\t\tconst newItem = jsCanvas.newItem(`.Layer-${baseName}`, {\n\t\t\tselector: true,\n\t\t\tdelay: delay,\n\t\t\tplaySpeed: playSpeed,\n\t\t});\n\t\tnewItem.set({\n\t\t\t...keyframes,\n\t\t\toptions: {\n\t\t\t\tdelay: delay,\n\t\t\t\titeration: iteration,\n\t\t\t\tplaySpeed: playSpeed,\n\t\t\t},\n\t\t});\n\t}, [name, keyframes, iteration]);\n\n\treturn (\n\t\t<div\n\t\t\tdata-testid={`Layer-${baseName}`}\n\t\t\tclassName={`Layer-${baseName}`}\n\t\t\tstyle={{\n\t\t\t\tposition: 'absolute',\n\t\t\t\twidth: ratio.width,\n\t\t\t\theight: ratio.height,\n\t\t\t\tleft: 0,\n\t\t\t\tright: 0,\n\t\t\t\ttop: 0,\n\t\t\t\tbottom: 0,\n\t\t\t\tmargin: 'auto',\n\t\t\t\t...style,\n\t\t\t}}\n\t\t>\n\t\t\t{children}\n\t\t</div>\n\t);\n};\n\nLayer.defaultProps = {\n\tname: 'animation',\n\tid: 1,\n\tratio: {\n\t\twidth: 1080,\n\t\theight: 720,\n\t},\n\tkeyframes: {},\n\tstyle: {},\n\tplaySpeed: 1,\n\tdelay: 0,\n\tchildren: <div />,\n\titeration: 'infinite',\n};\n\nLayer.propTypes = {\n\tname: PropTypes.string,\n\tid: PropTypes.number,\n\tratio: PropTypes.object,\n\tkeyframes: PropTypes.object,\n\tstyle: PropTypes.object,\n\tlayerStyle: PropTypes.object,\n\tplaySpeed: PropTypes.number,\n\tdelay: PropTypes.number || PropTypes.string,\n\tchildren: PropTypes.any,\n\titeration: PropTypes.any,\n};\n\nexport { Layer };\n","import Scene from 'scenejs';\nimport { isString } from '@daybrush/utils';\n\nexport default class Media extends Scene {\n\tconstructor(url) {\n\t\tsuper();\n\t\tthis.isPlayMedia = true;\n\t\tthis.init(url);\n\t}\n\tgetMediaItem() {\n\t\treturn this.mediaItem;\n\t}\n\tgetVolume() {\n\t\treturn this.mediaItem.get(0, 'volume');\n\t}\n\tsetVolume(volume) {\n\t\tthis.mediaItem.set(0, 'volume', volume);\n\t\treturn this;\n\t}\n\tsetPlaySpeed(playSpeed) {\n\t\tthis.mediaItem.setPlaySpeed(playSpeed);\n\t\treturn this;\n\t}\n\tseek(fromTime, toTime) {\n\t\tconst mediaItem = this.mediaItem;\n\t\tmediaItem.set(0, 'seek', fromTime);\n\t\tmediaItem.set('100%', 'seek', toTime);\n\t\tmediaItem.setDuration(toTime - fromTime);\n\t\treturn this;\n\t}\n\tsetElement(element) {\n\t\tthis.mediaItem.setElement(element);\n\t\treturn this;\n\t}\n\tgetMediaElement() {\n\t\treturn this.mediaItem.getElements()[0];\n\t}\n\tgetInfo() {\n\t\tconst mediaItem = this.mediaItem;\n\t\tconst seek = [mediaItem.get(0, 'seek'), mediaItem.get('100%', 'seek')];\n\t\tconst playSpeed = mediaItem.getPlaySpeed();\n\t\tconst volume = this.getVolume();\n\t\tconst delay = this.getDelay();\n\t\tconst info = {\n\t\t\turl: this.url,\n\t\t\tseek,\n\t\t\tplaySpeed,\n\t\t\tdelay,\n\t\t\tvolume,\n\t\t};\n\t\treturn info;\n\t}\n\tinit(url) {\n\t\tconst mediaItem = this.newItem('media');\n\t\tmediaItem.newFrame(0);\n\t\tmediaItem.newFrame(1);\n\t\tmediaItem.set(0, 'volume', 1);\n\t\tmediaItem.set(0, 'seek', 0);\n\t\tmediaItem.set('100%', 'seek', 0);\n\t\tthis.mediaItem = mediaItem;\n\t\tif (isString(url)) {\n\t\t\tconst audio = new Audio();\n\t\t\taudio.src = url;\n\t\t\tthis.setElement(audio);\n\t\t\tthis.url = url;\n\t\t} else {\n\t\t\tif (url.src) {\n\t\t\t\tthis.url = url.src;\n\t\t\t} else {\n\t\t\t\tconst sourceElement = url.querySelector('[src]');\n\t\t\t\tthis.url = sourceElement ? sourceElement.src : '';\n\t\t\t}\n\t\t\tthis.setElement(url);\n\t\t}\n\t\tlet prevTime = 0;\n\t\tthis.on('paused', (e) => {\n\t\t\tvar _a;\n\t\t\tthis.isPlayMedia = false;\n\t\t\t(_a = this.getMediaElement()) === null || _a === void 0\n\t\t\t\t? void 0\n\t\t\t\t: _a.pause();\n\t\t});\n\t\tthis.on('animate', (e) => {\n\t\t\tconst mediaElement = this.getMediaElement();\n\t\t\tmediaElement.muted = false;\n\t\t\tconst time = e.time;\n\t\t\tconst isReversTime = prevTime > time;\n\t\t\tconst isRunning = this.getPlayState() === 'running';\n\t\t\tconst isReverse = this.getDirection().indexOf('reverse') > -1;\n\t\t\tconst isPlayMedia = this.isPlayMedia;\n\t\t\tconst frame = e.frames.media;\n\t\t\tconst playSpeed = mediaItem.getPlaySpeed();\n\t\t\tconst duration = this.getDuration();\n\t\t\tconst volume = this.getVolume();\n\t\t\tconst seek = frame.get('seek');\n\t\t\tprevTime = time;\n\t\t\tif (!isRunning || !isPlayMedia) {\n\t\t\t\tmediaElement.playbackRate = playSpeed * (isReverse ? -1 : 1);\n\t\t\t\tmediaElement.currentTime = seek;\n\t\t\t}\n\t\t\tif (isReversTime || time <= 0 || duration <= time) {\n\t\t\t\t// end play\n\t\t\t\tif (isRunning) {\n\t\t\t\t\tthis.isPlayMedia = false;\n\t\t\t\t\tmediaElement.pause();\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tmediaElement.volume = volume;\n\t\t\t\tif (!isPlayMedia && isRunning) {\n\t\t\t\t\tthis.isPlayMedia = true;\n\t\t\t\t\tconst result = mediaElement.play();\n\t\t\t\t\tif (result instanceof Promise) {\n\t\t\t\t\t\tresult.catch(() => {\n\t\t\t\t\t\t\tmediaElement.muted = true;\n\t\t\t\t\t\t\tmediaElement.play();\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n}\n","import Scene from 'scenejs';\nimport Media from './Media';\nexport default class MediaScene extends Scene {\n\tconstructor() {\n\t\tsuper();\n\t\tthis.playInfos = {};\n\t}\n\t/**\n\t * add video or audio mediaInfo\n\t * @param id\n\t * @param url\n\t */\n\taddMedia(id, url = id) {\n\t\tconst media = new Media(url);\n\t\tthis.setItem(id, media);\n\t\treturn media;\n\t}\n\tgetInfo() {\n\t\tconst info = {\n\t\t\tduration: 0,\n\t\t\tmedias: [],\n\t\t};\n\t\tthis.forEach((media) => {\n\t\t\tinfo.medias.push(media.getInfo());\n\t\t});\n\t\tinfo.duration = this.getDuration();\n\t\treturn info;\n\t}\n}\n","import Scene, { EASE_IN_OUT } from 'scenejs';\n\nconst JsCanvas = new Scene(\n\t{},\n\t{\n\t\teasing: EASE_IN_OUT,\n\t\titerationCount: 1,\n\t\tselector: true,\n\t}\n).setTime(0);\n\nexport { JsCanvas };\n","import React, { useContext, useEffect, useState } from 'react';\nimport PropTypes from 'prop-types';\nimport '../Canvas/Canvas.css';\nimport MediaScene from '../media';\nimport { JsCanvas } from '../jscanvas';\nimport { JsCanvasContext } from '../../util/useJsCanvas';\n\nconst AudioLayer = ({\n\tname,\n\tid,\n\taudio,\n\tvolume,\n\tplaySpeed,\n\tdelay,\n\tseekStart,\n\tseekEnd,\n}) => {\n\tconst jsCanvas = useContext(JsCanvasContext);\n\tuseEffect(() => {\n\t\tlet media = new MediaScene();\n\t\tlet theDuration = jsCanvas.getDuration();\n\t\tlet newMedia = media.addMedia(name + id, audio);\n\n\t\tnewMedia.setVolume(volume).setPlaySpeed(playSpeed).setDelay(delay);\n\n\t\tif (seekEnd > 0) {\n\t\t\tnewMedia.seek(seekStart, seekEnd);\n\t\t} else {\n\t\t\tnewMedia.seek(0, theDuration);\n\t\t}\n\t\tjsCanvas.setItem('media', newMedia);\n\t}, [seekStart, seekEnd]);\n\n\treturn <></>;\n};\n\nAudioLayer.defaultProps = {\n\tname: 'audio',\n\tid: 1,\n\taudio:\n\t\t'http://cld3097web.audiovideoweb.com/va90web25003/companions/Foundations%20of%20Rock/5.02.mp3',\n\tvolume: 1,\n\tplaySpeed: 1,\n\tdelay: 0,\n\tseekStart: 0,\n\tseekEnd: 0,\n};\n\nAudioLayer.propTypes = {\n\tname: PropTypes.string,\n\tid: PropTypes.number,\n\tvolume: PropTypes.number,\n\taudio: PropTypes.string,\n\tplaySpeed: PropTypes.number,\n\tdelay: PropTypes.number || PropTypes.string,\n\tseekStart: PropTypes.number,\n\tseekEnd: PropTypes.number,\n};\n\nexport { AudioLayer };\n","import { useEffect, useState } from 'react';\n\nfunction getWindowDimensions() {\n\tconst { innerWidth: width, innerHeight: height } =\n\t\ttypeof window !== 'undefined' ? window : {};\n\treturn {\n\t\twidth,\n\t\theight,\n\t};\n}\n\nexport default function useWindowDimensions(\n\tcanvasContentRef,\n\tmaxWidth,\n\tmaxHeight\n) {\n\tconst [windowDimensions, setWindowDimensions] = useState(\n\t\tgetWindowDimensions()\n\t);\n\n\tuseEffect(() => {\n\t\tfunction handleResize() {\n\t\t\tlet theRatio = {\n\t\t\t\theight: getWindowDimensions().height / (16 / 9),\n\t\t\t\twidth: getWindowDimensions().width / (16 / 9),\n\t\t\t};\n\n\t\t\ttheRatio.scale = Math.min(\n\t\t\t\ttheRatio.width / maxWidth,\n\t\t\t\ttheRatio.height / maxHeight\n\t\t\t);\n\t\t\tsetWindowDimensions(theRatio);\n\t\t}\n\n\t\thandleResize();\n\n\t\twindow.addEventListener('resize', handleResize);\n\t\treturn () => window.removeEventListener('resize', handleResize);\n\t}, []);\n\n\treturn windowDimensions;\n}\n","import React, {\n\tforwardRef,\n\tuseContext,\n\tuseEffect,\n\tuseImperativeHandle,\n\tuseRef,\n\tuseState,\n} from 'react';\nimport PropTypes from 'prop-types';\nimport './Canvas.css';\nimport Scene from 'scenejs';\nimport useWindowDimensions from '../../util/useWindowDimensions';\nimport { JsCanvasContext } from '../../util/useJsCanvas';\n\nconst CanvasContainer = forwardRef(\n\t(\n\t\t{\n\t\t\tchildren,\n\t\t\twidth,\n\t\t\theight,\n\t\t\tcontrols,\n\t\t\tplaying,\n\t\t\tfullWidth,\n\t\t\tanimationDuration,\n\t\t\tinline,\n\t\t},\n\t\tref\n\t) => {\n\t\tconst jsCanvas = useContext(JsCanvasContext);\n\t\tconst canvasRef = useRef(null);\n\t\tconst [isPlaying, setIsPlaying] = useState(false);\n\t\tconst [progress, setProgress] = useState(0);\n\n\t\tuseImperativeHandle(ref, () => ({\n\t\t\tplay() {\n\t\t\t\tjsCanvas.play();\n\t\t\t},\n\t\t\tpause() {\n\t\t\t\tjsCanvas.pause();\n\t\t\t},\n\t\t\tfinish() {\n\t\t\t\tjsCanvas.finish();\n\t\t\t},\n\t\t}));\n\n\t\tconst {\n\t\t\theight: windowHeight,\n\t\t\twidth: windowWidth,\n\t\t\tscale,\n\t\t} = useWindowDimensions(canvasRef, width, height);\n\n\t\tuseEffect(() => {\n\t\t\tlet duration = jsCanvas.getDuration();\n\t\t\tanimationDuration(duration);\n\n\t\t\tjsCanvas.on('play', (e) => {\n\t\t\t\tsetIsPlaying(true);\n\t\t\t});\n\t\t\tjsCanvas.on('paused', (e) => {\n\t\t\t\tsetIsPlaying(false);\n\t\t\t});\n\t\t\tjsCanvas.on('animate', (e) => {\n\t\t\t\tsetProgress((100 * e.time) / duration);\n\t\t\t});\n\t\t\tif (playing) {\n\t\t\t\tplaying({\n\t\t\t\t\tplaying: isPlaying,\n\t\t\t\t\tprogress: progress,\n\t\t\t\t});\n\t\t\t}\n\t\t}, [isPlaying, progress]);\n\n\t\treturn (\n\t\t\t<div id=\"canvasContainer\">\n\t\t\t\t<div\n\t\t\t\t\tclassName={inline ? '' : 'Canvas'}\n\t\t\t\t\tid=\"recorderCanvas\"\n\t\t\t\t\tref={canvasRef}\n\t\t\t\t>\n\t\t\t\t\t<div\n\t\t\t\t\t\tclassName=\"CanvasInner\"\n\t\t\t\t\t\tstyle={\n\t\t\t\t\t\t\tfullWidth\n\t\t\t\t\t\t\t\t? {\n\t\t\t\t\t\t\t\t\t\twidth: '100%',\n\t\t\t\t\t\t\t\t\t\theight: '100%',\n\t\t\t\t\t\t\t\t  }\n\t\t\t\t\t\t\t\t: {\n\t\t\t\t\t\t\t\t\t\twidth: windowWidth,\n\t\t\t\t\t\t\t\t\t\theight: windowHeight,\n\t\t\t\t\t\t\t\t  }\n\t\t\t\t\t\t}\n\t\t\t\t\t>\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tid=\"Composition\"\n\t\t\t\t\t\t\tclassName=\"Composition\"\n\t\t\t\t\t\t\tstyle={\n\t\t\t\t\t\t\t\tfullWidth\n\t\t\t\t\t\t\t\t\t? {\n\t\t\t\t\t\t\t\t\t\t\twidth: width,\n\t\t\t\t\t\t\t\t\t\t\theight: height,\n\t\t\t\t\t\t\t\t\t  }\n\t\t\t\t\t\t\t\t\t: {\n\t\t\t\t\t\t\t\t\t\t\twidth: width,\n\t\t\t\t\t\t\t\t\t\t\theight: height,\n\t\t\t\t\t\t\t\t\t\t\ttransform: `translate(-50%, -50%) scale(${\n\t\t\t\t\t\t\t\t\t\t\t\tscale ? scale : 1\n\t\t\t\t\t\t\t\t\t\t\t})`,\n\t\t\t\t\t\t\t\t\t  }\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tclassName=\"Layers\"\n\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\twidth: width,\n\t\t\t\t\t\t\t\t\theight: height,\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{children}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t{controls && (\n\t\t\t\t\t<div className={inline ? 'playerWrapperInline' : 'playerWrapper'}>\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclassName=\"player\"\n\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\twidth: windowWidth,\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tclassName={`${isPlaying ? 'pause' : 'play'}`}\n\t\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\t\tjsCanvas.isPaused() ? jsCanvas.play() : jsCanvas.pause();\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\tclassName=\"progress\"\n\t\t\t\t\t\t\t\ttype=\"range\"\n\t\t\t\t\t\t\t\tonChange={(e) => {\n\t\t\t\t\t\t\t\t\tjsCanvas.pause();\n\t\t\t\t\t\t\t\t\tjsCanvas.setTime(e.target.value + '%');\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\tvalue={progress.toString()}\n\t\t\t\t\t\t\t\tmin=\"0\"\n\t\t\t\t\t\t\t\tmax=\"100\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\t\t\t</div>\n\t\t);\n\t}\n);\n\nconst Canvas = forwardRef(\n\t(\n\t\t{\n\t\t\tchildren,\n\t\t\twidth,\n\t\t\theight,\n\t\t\tjsCanva,\n\t\t\tcontrols,\n\t\t\tplaying,\n\t\t\tfullWidth,\n\t\t\tanimationDuration,\n\t\t\tinline,\n\t\t},\n\t\tref\n\t) => {\n\t\tconst jc = new Scene(\n\t\t\t{},\n\t\t\t{\n\t\t\t\teasing: Scene.EASE_IN_OUT,\n\t\t\t\titerationCount: 1,\n\t\t\t\tselector: true,\n\t\t\t}\n\t\t).setTime(0);\n\n\t\treturn (\n\t\t\t<JsCanvasContext.Provider value={jc}>\n\t\t\t\t<CanvasContainer\n\t\t\t\t\tref={ref}\n\t\t\t\t\theight={height}\n\t\t\t\t\twidth={width}\n\t\t\t\t\tcontrols={controls}\n\t\t\t\t\tplaying={playing}\n\t\t\t\t\tjsCanva={jsCanva}\n\t\t\t\t\tfullWidth={fullWidth}\n\t\t\t\t\tanimationDuration={animationDuration}\n\t\t\t\t\tinline={inline}\n\t\t\t\t>\n\t\t\t\t\t{children}\n\t\t\t\t</CanvasContainer>\n\t\t\t</JsCanvasContext.Provider>\n\t\t);\n\t}\n);\n\nCanvas.defaultProps = {\n\twidth: 1920,\n\theight: 1080,\n\tchildren: [],\n\tcontrols: true,\n\tplaying: () => {},\n\tfullWidth: false,\n\tanimationDuration: () => {},\n\tinline: false,\n};\n\nCanvas.propTypes = {\n\twidth: PropTypes.number,\n\theight: PropTypes.number,\n\tchildren: PropTypes.any,\n\tcontrols: PropTypes.bool,\n\tplaying: PropTypes.func,\n\tfullWidth: PropTypes.bool,\n\tanimationDuration: PropTypes.func,\n\tinline: PropTypes.bool,\n};\n\nexport { Canvas };\n"],"names":["css","ref","head","style","insertAt","document","getElementsByTagName","createElement","type","firstChild","insertBefore","appendChild","styleSheet","cssText","createTextNode","JsCanvasContext","createContext","Layer","_ref","children","name","id","ratio","keyframes","playSpeed","delay","iteration","jsCanvas","useContext","baseName","replaceAll","useEffect","newItem","concat","selector","set","_objectSpread","options","React","data-testid","className","position","width","height","left","right","top","bottom","margin","Media","defaultProps","propTypes","PropTypes","string","number","object","layerStyle","any","_inherits","Scene","_super","_createSuper","url","_this","_classCallCheck","this","call","isPlayMedia","init","_createClass","key","value","mediaItem","get","volume","setPlaySpeed","fromTime","toTime","setDuration","element","setElement","getElements","seek","getPlaySpeed","getVolume","getDelay","sourceElement","_this2","prevTime","newFrame","isString","audio","Audio","src","querySelector","on","e","_a","getMediaElement","pause","mediaElement","time","muted","isReversTime","isRunning","getPlayState","isReverse","getDirection","indexOf","frame","frames","media","duration","getDuration","playbackRate","currentTime","result","play","Promise","catch","MediaScene","playInfos","setItem","info","medias","forEach","push","getInfo","AudioLayer","easing","EASE_IN_OUT","iterationCount","setTime","seekStart","seekEnd","theDuration","newMedia","addMedia","setVolume","setDelay","Fragment","getWindowDimensions","window","innerWidth","innerHeight","CanvasContainer","forwardRef","maxWidth","maxHeight","setWindowDimensions","controls","playing","fullWidth","animationDuration","inline","canvasRef","useRef","_useState2","_slicedToArray","useState","isPlaying","setIsPlaying","_useState4","progress","setProgress","_useWindowDimensions","useImperativeHandle","finish","windowDimensions","handleResize","theRatio","scale","Math","min","addEventListener","removeEventListener","windowHeight","windowWidth","transform","onClick","isPaused","onChange","target","toString","max","Canvas","_ref2","jsCanva","jc","Provider","bool","func"],"mappings":"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"}