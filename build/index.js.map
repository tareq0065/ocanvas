{"version":3,"file":"index.js","sources":["../node_modules/style-inject/dist/style-inject.es.js","../util/useJsCanvas.js","../src/components/Layer.js","../util/useWindowDimensions.js","../src/media/Media.js","../src/media/index.js","../src/Canvas/Canvas.js"],"sourcesContent":["function styleInject(css, ref) {\n  if ( ref === void 0 ) ref = {};\n  var insertAt = ref.insertAt;\n\n  if (!css || typeof document === 'undefined') { return; }\n\n  var head = document.head || document.getElementsByTagName('head')[0];\n  var style = document.createElement('style');\n  style.type = 'text/css';\n\n  if (insertAt === 'top') {\n    if (head.firstChild) {\n      head.insertBefore(style, head.firstChild);\n    } else {\n      head.appendChild(style);\n    }\n  } else {\n    head.appendChild(style);\n  }\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nexport default styleInject;\n","import { createContext, useEffect, useState } from 'react';\nimport Scene from 'scenejs';\n\nconst JsCanvasContext = createContext(null);\nconst JsCanvasMediaContext = createContext(null);\n\nexport { JsCanvasContext, JsCanvasMediaContext };\n","import React, { useContext, useEffect } from 'react';\nimport PropTypes from 'prop-types';\nimport '../Canvas/Canvas.scss';\nimport { JsCanvasContext } from '../../util/useJsCanvas';\n\nconst Layer = ({\n\tchildren,\n\tname,\n\tid,\n\tratio,\n\tkeyframes,\n\tstyle,\n\tlayerStyle,\n\tplaySpeed,\n\tdelay,\n\tautoPlay,\n\titeration,\n}) => {\n\tconst jsCanvas = useContext(JsCanvasContext);\n\tconst baseName = name.replaceAll(' ', '_') + id;\n\n\tuseEffect(() => {\n\t\tconst newItem = jsCanvas.newItem(`.Layer-${baseName}`, {\n\t\t\tselector: true,\n\t\t\tdelay: delay,\n\t\t\tplaySpeed: playSpeed,\n\t\t});\n\t\tnewItem.set({\n\t\t\t...keyframes,\n\t\t\toptions: {\n\t\t\t\tdelay: delay,\n\t\t\t\titeration: iteration,\n\t\t\t\tplaySpeed: playSpeed,\n\t\t\t},\n\t\t});\n\t}, [name, keyframes, iteration]);\n\n\treturn (\n\t\t<div\n\t\t\tdata-testid={`Layer-${baseName}`}\n\t\t\tclassName={`Layer-${baseName}`}\n\t\t\tstyle={{\n\t\t\t\tposition: 'absolute',\n\t\t\t\twidth: ratio.width,\n\t\t\t\theight: ratio.height,\n\t\t\t\tleft: 0,\n\t\t\t\tright: 0,\n\t\t\t\ttop: 0,\n\t\t\t\tbottom: 0,\n\t\t\t\tmargin: 'auto',\n\t\t\t\t...style,\n\t\t\t}}\n\t\t>\n\t\t\t{children}\n\t\t</div>\n\t);\n};\n\nLayer.defaultProps = {\n\tname: 'animation',\n\tid: 1,\n\tratio: {\n\t\twidth: 1080,\n\t\theight: 720,\n\t},\n\tkeyframes: {},\n\tstyle: {},\n\tlayerStyle: {},\n\tplaySpeed: 1,\n\tdelay: 0,\n\tautoPlay: false,\n\tchildren: <div />,\n\titeration: 'infinite',\n};\n\nLayer.propTypes = {\n\tname: PropTypes.string,\n\tid: PropTypes.number,\n\tratio: PropTypes.object,\n\tkeyframes: PropTypes.object,\n\tstyle: PropTypes.object,\n\tlayerStyle: PropTypes.object,\n\tplaySpeed: PropTypes.number,\n\tdelay: PropTypes.number || PropTypes.string,\n\tautoPlay: PropTypes.bool,\n\tchildren: PropTypes.any,\n\titeration: PropTypes.any,\n};\n\nexport { Layer };\n","import { useEffect, useState } from 'react';\n\nfunction getWindowDimensions() {\n\tconst { innerWidth: width, innerHeight: height } =\n\t\ttypeof window !== 'undefined' ? window : {};\n\treturn {\n\t\twidth,\n\t\theight,\n\t};\n}\n\nexport default function useWindowDimensions(\n\tcanvasContentRef,\n\tmaxWidth,\n\tmaxHeight\n) {\n\tconst [windowDimensions, setWindowDimensions] = useState(\n\t\tgetWindowDimensions()\n\t);\n\n\tuseEffect(() => {\n\t\tfunction handleResize() {\n\t\t\tlet theRatio = {\n\t\t\t\theight: getWindowDimensions().height / (16 / 9),\n\t\t\t\twidth: getWindowDimensions().width / (16 / 9),\n\t\t\t};\n\n\t\t\ttheRatio.scale = Math.min(\n\t\t\t\ttheRatio.width / maxWidth,\n\t\t\t\ttheRatio.height / maxHeight\n\t\t\t);\n\t\t\tsetWindowDimensions(theRatio);\n\t\t}\n\n\t\thandleResize();\n\n\t\twindow.addEventListener('resize', handleResize);\n\t\treturn () => window.removeEventListener('resize', handleResize);\n\t}, []);\n\n\treturn windowDimensions;\n}\n","import Scene from 'scenejs';\nimport { isString } from '@daybrush/utils';\nimport MediaScene from './index';\nexport default class Media extends Scene {\n\tconstructor(url) {\n\t\tsuper();\n\t\tthis.isPlayMedia = true;\n\t\tthis.init(url);\n\t}\n\tgetMediaItem() {\n\t\treturn this.mediaItem;\n\t}\n\tgetVolume() {\n\t\treturn this.mediaItem.get(0, 'volume');\n\t}\n\tsetVolume(volume) {\n\t\tthis.mediaItem.set(0, 'volume', volume);\n\t\treturn this;\n\t}\n\tsetPlaySpeed(playSpeed) {\n\t\tthis.mediaItem.setPlaySpeed(playSpeed);\n\t\treturn this;\n\t}\n\tseek(fromTime, toTime) {\n\t\tconst mediaItem = this.mediaItem;\n\t\tmediaItem.set(0, 'seek', fromTime);\n\t\tmediaItem.set('100%', 'seek', toTime);\n\t\tmediaItem.setDuration(toTime - fromTime);\n\t\treturn this;\n\t}\n\tsetElement(element) {\n\t\tthis.mediaItem.setElement(element);\n\t\treturn this;\n\t}\n\tgetMediaElement() {\n\t\treturn this.mediaItem.getElements()[0];\n\t}\n\tgetInfo() {\n\t\tconst mediaItem = this.mediaItem;\n\t\tconst seek = [mediaItem.get(0, 'seek'), mediaItem.get('100%', 'seek')];\n\t\tconst playSpeed = mediaItem.getPlaySpeed();\n\t\tconst volume = this.getVolume();\n\t\tconst delay = this.getDelay();\n\t\tconst info = {\n\t\t\turl: this.url,\n\t\t\tseek,\n\t\t\tplaySpeed,\n\t\t\tdelay,\n\t\t\tvolume,\n\t\t};\n\t\treturn info;\n\t}\n\tinit(url) {\n\t\tconst mediaItem = this.newItem('media');\n\t\tconsole.log('mediaItem:', mediaItem);\n\t\tmediaItem.newFrame(0);\n\t\tmediaItem.newFrame(1);\n\t\tmediaItem.set(0, 'volume', 1);\n\t\tmediaItem.set(0, 'seek', 0);\n\t\tmediaItem.set('100%', 'seek', 0);\n\t\tconsole.log('mediaItemafter:', mediaItem);\n\t\tthis.mediaItem = mediaItem;\n\t\tif (isString(url)) {\n\t\t\tconst audio = new Audio();\n\t\t\taudio.src = url;\n\t\t\tthis.setElement(audio);\n\t\t\tthis.url = url;\n\t\t} else {\n\t\t\tif (url.src) {\n\t\t\t\tthis.url = url.src;\n\t\t\t} else {\n\t\t\t\tconst sourceElement = url.querySelector('[src]');\n\t\t\t\tthis.url = sourceElement ? sourceElement.src : '';\n\t\t\t}\n\t\t\tthis.setElement(url);\n\t\t}\n\t\tlet prevTime = 0;\n\t\tthis.on('paused', (e) => {\n\t\t\tvar _a;\n\t\t\tthis.isPlayMedia = false;\n\t\t\t(_a = this.getMediaElement()) === null || _a === void 0\n\t\t\t\t? void 0\n\t\t\t\t: _a.pause();\n\t\t});\n\t\tthis.on('animate', (e) => {\n\t\t\tconst mediaElement = this.getMediaElement();\n\t\t\tmediaElement.muted = false;\n\t\t\tconst time = e.time;\n\t\t\tconst isReversTime = prevTime > time;\n\t\t\tconst isRunning = this.getPlayState() === 'running';\n\t\t\tconst isReverse = this.getDirection().indexOf('reverse') > -1;\n\t\t\tconst isPlayMedia = this.isPlayMedia;\n\t\t\tconst frame = e.frames.media;\n\t\t\tconst playSpeed = mediaItem.getPlaySpeed();\n\t\t\tconst duration = this.getDuration();\n\t\t\tconst volume = this.getVolume();\n\t\t\tconst seek = frame.get('seek');\n\t\t\tprevTime = time;\n\t\t\tif (!isRunning || !isPlayMedia) {\n\t\t\t\tmediaElement.playbackRate = playSpeed * (isReverse ? -1 : 1);\n\t\t\t\tmediaElement.currentTime = seek;\n\t\t\t}\n\t\t\tif (isReversTime || time <= 0 || duration <= time) {\n\t\t\t\t// end play\n\t\t\t\tif (isRunning) {\n\t\t\t\t\tthis.isPlayMedia = false;\n\t\t\t\t\tmediaElement.pause();\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tmediaElement.volume = volume;\n\t\t\t\tif (!isPlayMedia && isRunning) {\n\t\t\t\t\tthis.isPlayMedia = true;\n\t\t\t\t\tconst result = mediaElement.play();\n\t\t\t\t\tif (result instanceof Promise) {\n\t\t\t\t\t\tresult.catch(() => {\n\t\t\t\t\t\t\tmediaElement.muted = true;\n\t\t\t\t\t\t\tmediaElement.play();\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n}\n","import NativeScene from 'scenejs';\nimport Media from './Media';\nexport default class MediaScene extends NativeScene {\n\tconstructor() {\n\t\tsuper();\n\t\tthis.playInfos = {};\n\t}\n\t/**\n\t * add video or audio mediaInfo\n\t * @param id\n\t * @param url\n\t */\n\taddMedia(id, url = id) {\n\t\tconst media = new Media(url);\n\t\tthis.setItem(id, media);\n\t\treturn media;\n\t}\n\tgetInfo() {\n\t\tconst info = {\n\t\t\tduration: 0,\n\t\t\tmedias: [],\n\t\t};\n\t\tthis.forEach((media) => {\n\t\t\tinfo.medias.push(media.getInfo());\n\t\t});\n\t\tinfo.duration = this.getDuration();\n\t\treturn info;\n\t}\n}\n","import React, { useContext, useEffect, useRef, useState } from 'react';\nimport PropTypes from 'prop-types';\nimport './Canvas.scss';\nimport useWindowDimensions from '../../util/useWindowDimensions';\nimport Scene from 'scenejs';\nimport { JsCanvasContext, JsCanvasMediaContext } from '../../util/useJsCanvas';\nimport MediaScene from '../media';\n\nconst CanvasContainer = ({\n\tchildren,\n\twidth,\n\theight,\n\tjsCanva,\n\tautoPlay,\n\tcontrols,\n\tfullWidth,\n\tanimationDuration,\n}) => {\n\tconst jsCanvas = useContext(JsCanvasContext);\n\tconst canvasRef = useRef(null);\n\tconst [isPlaying, setIsPlaying] = useState(false);\n\tconst [progress, setProgress] = useState(0);\n\tconst {\n\t\theight: windowHeight,\n\t\twidth: windowWidth,\n\t\tscale,\n\t} = useWindowDimensions(canvasRef, width, height);\n\n\tuseEffect(() => {\n\t\tlet duration = jsCanvas.getDuration();\n\t\tjsCanva(jsCanvas);\n\t\tanimationDuration(duration);\n\n\t\tif (autoPlay) {\n\t\t\tjsCanvas.play();\n\t\t\tsetIsPlaying(true);\n\t\t}\n\n\t\tjsCanvas.on('play', (e) => {\n\t\t\tsetIsPlaying(true);\n\t\t});\n\t\tjsCanvas.on('paused', (e) => {\n\t\t\tsetIsPlaying(false);\n\t\t});\n\t\tjsCanvas.on('animate', (e) => {\n\t\t\tsetProgress((100 * e.time) / duration);\n\t\t});\n\t}, []);\n\n\treturn (\n\t\t<div id=\"canvasContainer\">\n\t\t\t<div className=\"Canvas\" id=\"recorderCanvas\" ref={canvasRef}>\n\t\t\t\t<div\n\t\t\t\t\tclassName=\"CanvasInner\"\n\t\t\t\t\tstyle={\n\t\t\t\t\t\tfullWidth\n\t\t\t\t\t\t\t? {\n\t\t\t\t\t\t\t\t\twidth: '100%',\n\t\t\t\t\t\t\t\t\theight: '100%',\n\t\t\t\t\t\t\t  }\n\t\t\t\t\t\t\t: {\n\t\t\t\t\t\t\t\t\twidth: windowWidth,\n\t\t\t\t\t\t\t\t\theight: windowHeight,\n\t\t\t\t\t\t\t  }\n\t\t\t\t\t}\n\t\t\t\t>\n\t\t\t\t\t<div\n\t\t\t\t\t\tid=\"Composition\"\n\t\t\t\t\t\tclassName=\"Composition\"\n\t\t\t\t\t\tstyle={\n\t\t\t\t\t\t\tfullWidth\n\t\t\t\t\t\t\t\t? {\n\t\t\t\t\t\t\t\t\t\twidth: width,\n\t\t\t\t\t\t\t\t\t\theight: height,\n\t\t\t\t\t\t\t\t  }\n\t\t\t\t\t\t\t\t: {\n\t\t\t\t\t\t\t\t\t\twidth: width,\n\t\t\t\t\t\t\t\t\t\theight: height,\n\t\t\t\t\t\t\t\t\t\ttransform: `translate(-50%, -50%) scale(${\n\t\t\t\t\t\t\t\t\t\t\tscale ? scale : 1\n\t\t\t\t\t\t\t\t\t\t})`,\n\t\t\t\t\t\t\t\t  }\n\t\t\t\t\t\t}\n\t\t\t\t\t>\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclassName=\"Layers\"\n\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\twidth: width,\n\t\t\t\t\t\t\t\theight: height,\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{children}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t{controls && (\n\t\t\t\t<div className=\"playerWrapper\">\n\t\t\t\t\t<div\n\t\t\t\t\t\tclassName=\"player\"\n\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\twidth: windowWidth,\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclassName={`${isPlaying ? 'pause' : 'play'}`}\n\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\tjsCanvas.isPaused() ? jsCanvas.play() : jsCanvas.pause();\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\tclassName=\"progress\"\n\t\t\t\t\t\t\ttype=\"range\"\n\t\t\t\t\t\t\tonChange={(e) => {\n\t\t\t\t\t\t\t\tjsCanvas.pause();\n\t\t\t\t\t\t\t\tjsCanvas.setTime(e.target.value + '%');\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tvalue={progress.toString()}\n\t\t\t\t\t\t\tmin=\"0\"\n\t\t\t\t\t\t\tmax=\"100\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t)}\n\t\t</div>\n\t);\n};\n\nconst Canvas = ({\n\tchildren,\n\twidth,\n\theight,\n\tjsCanva,\n\tautoPlay,\n\tcontrols,\n\tfullWidth,\n\tanimationDuration,\n}) => {\n\treturn (\n\t\t<JsCanvasContext.Provider\n\t\t\tvalue={new Scene(\n\t\t\t\t{},\n\t\t\t\t{\n\t\t\t\t\teasing: Scene.EASE_IN_OUT,\n\t\t\t\t\titerationCount: 1,\n\t\t\t\t\tselector: true,\n\t\t\t\t}\n\t\t\t).setTime(0)}\n\t\t>\n\t\t\t<JsCanvasMediaContext.Provider value={new MediaScene()}>\n\t\t\t\t<CanvasContainer\n\t\t\t\t\theight={height}\n\t\t\t\t\twidth={width}\n\t\t\t\t\tautoPlay={autoPlay}\n\t\t\t\t\tcontrols={controls}\n\t\t\t\t\tjsCanva={jsCanva}\n\t\t\t\t\tfullWidth={fullWidth}\n\t\t\t\t\tanimationDuration={animationDuration}\n\t\t\t\t>\n\t\t\t\t\t{children}\n\t\t\t\t</CanvasContainer>\n\t\t\t</JsCanvasMediaContext.Provider>\n\t\t</JsCanvasContext.Provider>\n\t);\n};\n\nCanvas.defaultProps = {\n\twidth: 1920,\n\theight: 1080,\n\tchildren: [],\n\tautoPlay: false,\n\tcontrols: true,\n\tjsCanva: () => {},\n\tfullWidth: false,\n\tanimationDuration: () => {},\n};\n\nCanvas.propTypes = {\n\twidth: PropTypes.number,\n\theight: PropTypes.number,\n\tchildren: PropTypes.any,\n\tautoPlay: PropTypes.bool,\n\tcontrols: PropTypes.bool,\n\tjsCanva: PropTypes.any,\n\tfullWidth: PropTypes.bool,\n\tanimationDuration: PropTypes.func,\n};\n\nexport { Canvas };\n"],"names":["css","ref","head","style","insertAt","document","getElementsByTagName","createElement","type","firstChild","insertBefore","appendChild","styleSheet","cssText","createTextNode","JsCanvasContext","createContext","JsCanvasMediaContext","Layer","_ref","children","name","id","ratio","keyframes","playSpeed","layerStyle","delay","iteration","autoPlay","jsCanvas","useContext","baseName","replaceAll","useEffect","newItem","concat","selector","set","_objectSpread","options","React","data-testid","className","position","width","height","left","right","top","bottom","margin","getWindowDimensions","window","innerWidth","innerHeight","defaultProps","propTypes","PropTypes","string","number","object","bool","any","Media","_inherits","Scene","_super","_createSuper","url","_this","_classCallCheck","this","call","isPlayMedia","init","_createClass","key","value","mediaItem","get","volume","setPlaySpeed","fromTime","toTime","setDuration","element","setElement","getElements","seek","getPlaySpeed","getVolume","getDelay","sourceElement","_this2","prevTime","console","log","newFrame","isString","audio","Audio","src","querySelector","on","e","_a","getMediaElement","pause","mediaElement","time","muted","isReversTime","isRunning","getPlayState","isReverse","getDirection","indexOf","frame","frames","media","duration","getDuration","playbackRate","currentTime","result","play","Promise","catch","MediaScene","NativeScene","playInfos","setItem","info","medias","forEach","push","getInfo","CanvasContainer","maxWidth","maxHeight","setWindowDimensions","jsCanva","controls","fullWidth","animationDuration","canvasRef","useRef","_useState2","_slicedToArray","useState","isPlaying","setIsPlaying","_useState4","progress","setProgress","_useWindowDimensions","windowDimensions","handleResize","theRatio","scale","Math","min","addEventListener","removeEventListener","windowHeight","windowWidth","transform","onClick","isPaused","onChange","setTime","target","toString","max","Canvas","_ref2","Provider","easing","EASE_IN_OUT","iterationCount","func"],"mappings":"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"}