!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports,require("react"),require("prop-types"),require("scenejs")):"function"==typeof define&&define.amd?define(["exports","react","prop-types","scenejs"],n):n((e="undefined"!=typeof globalThis?globalThis:e||self).ocanvas={},e.React,e.PropTypes,e.Scene)}(this,function(e,w,n,t){"use strict";function a(n,e){var t,r=Object.keys(n);return Object.getOwnPropertySymbols&&(t=Object.getOwnPropertySymbols(n),e&&(t=t.filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})),r.push.apply(r,t)),r}function d(r){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?a(Object(i),!0).forEach(function(e){var n,t;n=r,t=i[e=e],e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(i)):a(Object(i)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(i,e))})}return r}function x(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,i,a=[],o=!0,l=!1;try{for(t=t.call(e);!(o=(r=t.next()).done)&&(a.push(r.value),!n||a.length!==n);o=!0);}catch(e){l=!0,i=e}finally{try{o||null==t.return||t.return()}finally{if(l)throw i}}return a}}(e,n)||function(e,n){var t;if(e)return"string"==typeof e?r(e,n):"Map"===(t="Object"===(t=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:t)||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?r(e,n):void 0}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function i(e){var n=e.children,t=e.name,r=e.id,i=e.ratio,a=e.keyframes,o=e.style,l=e.playSpeed,s=e.delay,c=e.iteration,p=t.replaceAll(" ","_")+r;return w.useEffect(function(){j.newItem(".Layer-".concat(p),{selector:!0,delay:s,playSpeed:l}).set(d(d({},a),{},{options:{delay:s,iteration:c,playSpeed:l}}))},[t,a,c]),w.createElement("div",{"data-testid":"Layer-".concat(p),className:"Layer-".concat(p),style:d({position:"absolute",width:i.width,height:i.height,left:0,right:0,top:0,bottom:0,margin:"auto"},o)},n)}o="\n:root {\n  --background: #fff;\n  --font-color: #494949;\n}\n\n#canvasContainer {\n  min-width: 100%;\n  min-height: 100%;\n}\n\n.Canvas {\n  font-size: 14px;\n  margin: auto;\n  flex-shrink: 0;\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n  align-items: center;\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  height: 100%;\n  width: 100%;\n  background: #ebecf0;\n}\n\n.CanvasInner {\n  grid-area: canvas;\n  position: relative;\n  z-index: 0;\n  padding: 10px;\n}\n\n.Composition {\n  position: relative;\n  left: 50%;\n  top: 50%;\n  transform: translate(-50%, -50%);\n  transform-origin: center center;\n  -webkit-box-shadow: 0 1px 6px 0 rgb(32 33 36 / 28%);\n  -moz-box-shadow: 0 1px 6px 0 rgb(32 33 36 / 28%);\n  box-shadow: 0 1px 6px 0 rgb(32 33 36 / 28%);\n  overflow: hidden;\n}\n\n.Layers {\n  pointer-events: none;\n  background: white;\n}\n\n/*Player*/\n\n.playerWrapper {\n  position: absolute;\n  bottom: 20px;\n  margin: 0;\n  left: 0;\n  right: 0;\n  z-index: 99999999999;\n  display: flex;\n  justify-content: center;\n}\n\n.player {\n  position: relative;\n  align-items: center;\n  display: flex;\n}\n\n.circles .circle {\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  width: 200px;\n  height: 200px;\n  border: 100px solid black;\n  border-radius: 50%;\n  transform: translate(-50%, -50%);\n}\n\n.player .play, .player .pause, .player .progress {\n  display: inline-block;\n  vertical-align: middle;\n}\n\n.player .play {\n  border-left: 14px solid #333;\n  border-top: 8px solid transparent;\n  border-bottom: 8px solid transparent;\n}\n\n.player .pause {\n  border-left: 4px solid #333;\n  border-right: 4px solid #333;\n  width: 14px;\n  height: 16px;\n  box-sizing: border-box;\n}\n\n.player input[type=range] {\n  flex: auto;\n}\n\n.player input[type=range] {\n  -webkit-appearance: none;\n  background: rgba(0, 0, 0, 0.2);\n  height: 3px;\n  margin-left: 10px;\n}\n\n.player input[type=range]::-webkit-slider-thumb {\n  -webkit-appearance: none;\n  width: 14px;\n  height: 14px;\n  border-radius: 7px;\n  background: #333;\n}\n\n.player input[type=range]:focus {\n  outline: none;\n}\n",l=(l=void 0===l?{}:l).insertAt,"undefined"!=typeof document&&(s=document.head||document.getElementsByTagName("head")[0],(c=document.createElement("style")).type="text/css","top"===l&&s.firstChild?s.insertBefore(c,s.firstChild):s.appendChild(c),c.styleSheet?c.styleSheet.cssText=o:c.appendChild(document.createTextNode(o)));var o,l,s,c,j=new t({},{easing:t.EASE_IN_OUT,iterationCount:1,selector:!0}).setTime(0);function C(){var e="undefined"!=typeof window?window:{};return{width:e.innerWidth,height:e.innerHeight}}i.defaultProps={name:"animation",id:1,ratio:{width:1080,height:720},keyframes:{},style:{},playSpeed:1,delay:0,children:w.createElement("div",null),iteration:"infinite"},i.propTypes={name:n.string,id:n.number,ratio:n.object,keyframes:n.object,style:n.object,layerStyle:n.object,playSpeed:n.number,delay:n.number||n.string,children:n.any,iteration:n.any};function p(e){var n,t,r,i=e.children,a=e.width,o=e.height,l=e.jsCanva,s=e.autoPlay,c=e.controls,p=e.playing,d=e.fullWidth,u=e.animationDuration,e=w.useRef(null),h=(v=x(w.useState(!1),2))[0],y=v[1],f=(v=x(w.useState(0),2))[0],m=v[1];n=a,t=o,v=x(w.useState(C()),2),g=v[0],r=v[1],w.useEffect(function(){function e(){var e={height:C().height/(16/9),width:C().width/(16/9)};e.scale=Math.min(e.width/n,e.height/t),r(e)}return e(),window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}},[]);var g=(v=g).height,b=v.width,v=v.scale;return w.useEffect(function(){var n=j.getDuration();l(j),u(n),s&&(j.play(),y(!0)),j.on("play",function(e){y(!0)}),j.on("paused",function(e){y(!1)}),j.on("animate",function(e){m(100*e.time/n)}),p({playing:h,progress:f})},[h,f]),w.createElement("div",{id:"canvasContainer"},w.createElement("div",{className:"Canvas",id:"recorderCanvas",ref:e},w.createElement("div",{className:"CanvasInner",style:d?{width:"100%",height:"100%"}:{width:b,height:g}},w.createElement("div",{id:"Composition",className:"Composition",style:d?{width:a,height:o}:{width:a,height:o,transform:"translate(-50%, -50%) scale(".concat(v||1,")")}},w.createElement("div",{className:"Layers",style:{width:a,height:o}},i)))),c&&w.createElement("div",{className:"playerWrapper"},w.createElement("div",{className:"player",style:{width:b}},w.createElement("div",{className:"".concat(h?"pause":"play"),onClick:function(){j.isPaused()?j.play():j.pause()}}),w.createElement("input",{className:"progress",type:"range",onChange:function(e){j.pause(),j.setTime(e.target.value+"%")},value:f.toString(),min:"0",max:"100"}))))}function u(e){var n=e.children,t=e.width,r=e.height,i=e.jsCanva,a=e.autoPlay,o=e.controls,l=e.playing,s=e.fullWidth,e=e.animationDuration;return w.createElement(p,{height:r,width:t,autoPlay:a,controls:o,playing:l,jsCanva:i,fullWidth:s,animationDuration:e},n)}u.defaultProps={width:1920,height:1080,children:[],autoPlay:!1,controls:!0,playing:function(){},jsCanva:function(){},fullWidth:!1,animationDuration:function(){}},u.propTypes={width:n.number,height:n.number,children:n.any,autoPlay:n.bool,controls:n.bool,playing:n.func,jsCanva:n.any,fullWidth:n.bool,animationDuration:n.func},e.Canvas=u,e.Layer=i});
//# sourceMappingURL=ocanvas.js.map
