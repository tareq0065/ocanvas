{"version":3,"file":"ocanvas.js","sources":["../src/components/Layer.js","../node_modules/style-inject/dist/style-inject.es.js","../src/media/index.js","../src/media/Media.js","../util/useJsCanvas.js","../src/jscanvas.js","../src/components/AudioLayer.js","../util/useWindowDimensions.js","../src/Canvas/Canvas.js"],"sourcesContent":["import React, { useContext, useEffect, useReducer } from 'react';\nimport PropTypes from 'prop-types';\nimport '../Canvas/Canvas.css';\nimport { JsCanvasContext } from '../../util/useJsCanvas';\n\nconst Layer = ({\n\tchildren,\n\tname,\n\tid,\n\tratio,\n\tkeyframes,\n\tstyle,\n\tplaySpeed,\n\tdelay,\n\titeration,\n}) => {\n\tconst jsCanvas = useContext(JsCanvasContext);\n\tconst baseName = name.replaceAll(' ', '_') + id;\n\n\tuseEffect(() => {\n\t\tconst newItem = jsCanvas.newItem(`.Layer-${baseName}`, {\n\t\t\tselector: true,\n\t\t\tdelay: delay,\n\t\t\tplaySpeed: playSpeed,\n\t\t});\n\t\tnewItem.set({\n\t\t\t...keyframes,\n\t\t\toptions: {\n\t\t\t\tdelay: delay,\n\t\t\t\titeration: iteration,\n\t\t\t\tplaySpeed: playSpeed,\n\t\t\t},\n\t\t});\n\t}, [name, keyframes, iteration]);\n\n\treturn (\n\t\t<div\n\t\t\tdata-testid={`Layer-${baseName}`}\n\t\t\tclassName={`Layer-${baseName}`}\n\t\t\tstyle={{\n\t\t\t\tposition: 'absolute',\n\t\t\t\twidth: ratio.width,\n\t\t\t\theight: ratio.height,\n\t\t\t\tleft: 0,\n\t\t\t\tright: 0,\n\t\t\t\ttop: 0,\n\t\t\t\tbottom: 0,\n\t\t\t\tmargin: 'auto',\n\t\t\t\t...style,\n\t\t\t}}\n\t\t>\n\t\t\t{children}\n\t\t</div>\n\t);\n};\n\nLayer.defaultProps = {\n\tname: 'animation',\n\tid: 1,\n\tratio: {\n\t\twidth: 1080,\n\t\theight: 720,\n\t},\n\tkeyframes: {},\n\tstyle: {},\n\tplaySpeed: 1,\n\tdelay: 0,\n\tchildren: <div />,\n\titeration: 'infinite',\n};\n\nLayer.propTypes = {\n\tname: PropTypes.string,\n\tid: PropTypes.number,\n\tratio: PropTypes.object,\n\tkeyframes: PropTypes.object,\n\tstyle: PropTypes.object,\n\tlayerStyle: PropTypes.object,\n\tplaySpeed: PropTypes.number,\n\tdelay: PropTypes.number || PropTypes.string,\n\tchildren: PropTypes.any,\n\titeration: PropTypes.any,\n};\n\nexport { Layer };\n","function styleInject(css, ref) {\n  if ( ref === void 0 ) ref = {};\n  var insertAt = ref.insertAt;\n\n  if (!css || typeof document === 'undefined') { return; }\n\n  var head = document.head || document.getElementsByTagName('head')[0];\n  var style = document.createElement('style');\n  style.type = 'text/css';\n\n  if (insertAt === 'top') {\n    if (head.firstChild) {\n      head.insertBefore(style, head.firstChild);\n    } else {\n      head.appendChild(style);\n    }\n  } else {\n    head.appendChild(style);\n  }\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nexport default styleInject;\n","import Scene from 'scenejs';\nimport Media from './Media';\nexport default class MediaScene extends Scene {\n\tconstructor() {\n\t\tsuper();\n\t\tthis.playInfos = {};\n\t}\n\t/**\n\t * add video or audio mediaInfo\n\t * @param id\n\t * @param url\n\t */\n\taddMedia(id, url = id) {\n\t\tconst media = new Media(url);\n\t\tthis.setItem(id, media);\n\t\treturn media;\n\t}\n\tgetInfo() {\n\t\tconst info = {\n\t\t\tduration: 0,\n\t\t\tmedias: [],\n\t\t};\n\t\tthis.forEach((media) => {\n\t\t\tinfo.medias.push(media.getInfo());\n\t\t});\n\t\tinfo.duration = this.getDuration();\n\t\treturn info;\n\t}\n}\n","import Scene from 'scenejs';\nimport { isString } from '@daybrush/utils';\n\nexport default class Media extends Scene {\n\tconstructor(url) {\n\t\tsuper();\n\t\tthis.isPlayMedia = true;\n\t\tthis.init(url);\n\t}\n\tgetMediaItem() {\n\t\treturn this.mediaItem;\n\t}\n\tgetVolume() {\n\t\treturn this.mediaItem.get(0, 'volume');\n\t}\n\tsetVolume(volume) {\n\t\tthis.mediaItem.set(0, 'volume', volume);\n\t\treturn this;\n\t}\n\tsetPlaySpeed(playSpeed) {\n\t\tthis.mediaItem.setPlaySpeed(playSpeed);\n\t\treturn this;\n\t}\n\tseek(fromTime, toTime) {\n\t\tconst mediaItem = this.mediaItem;\n\t\tmediaItem.set(0, 'seek', fromTime);\n\t\tmediaItem.set('100%', 'seek', toTime);\n\t\tmediaItem.setDuration(toTime - fromTime);\n\t\treturn this;\n\t}\n\tsetElement(element) {\n\t\tthis.mediaItem.setElement(element);\n\t\treturn this;\n\t}\n\tgetMediaElement() {\n\t\treturn this.mediaItem.getElements()[0];\n\t}\n\tgetInfo() {\n\t\tconst mediaItem = this.mediaItem;\n\t\tconst seek = [mediaItem.get(0, 'seek'), mediaItem.get('100%', 'seek')];\n\t\tconst playSpeed = mediaItem.getPlaySpeed();\n\t\tconst volume = this.getVolume();\n\t\tconst delay = this.getDelay();\n\t\tconst info = {\n\t\t\turl: this.url,\n\t\t\tseek,\n\t\t\tplaySpeed,\n\t\t\tdelay,\n\t\t\tvolume,\n\t\t};\n\t\treturn info;\n\t}\n\tinit(url) {\n\t\tconst mediaItem = this.newItem('media');\n\t\tmediaItem.newFrame(0);\n\t\tmediaItem.newFrame(1);\n\t\tmediaItem.set(0, 'volume', 1);\n\t\tmediaItem.set(0, 'seek', 0);\n\t\tmediaItem.set('100%', 'seek', 0);\n\t\tthis.mediaItem = mediaItem;\n\t\tif (isString(url)) {\n\t\t\tconst audio = new Audio();\n\t\t\taudio.src = url;\n\t\t\tthis.setElement(audio);\n\t\t\tthis.url = url;\n\t\t} else {\n\t\t\tif (url.src) {\n\t\t\t\tthis.url = url.src;\n\t\t\t} else {\n\t\t\t\tconst sourceElement = url.querySelector('[src]');\n\t\t\t\tthis.url = sourceElement ? sourceElement.src : '';\n\t\t\t}\n\t\t\tthis.setElement(url);\n\t\t}\n\t\tlet prevTime = 0;\n\t\tthis.on('paused', (e) => {\n\t\t\tvar _a;\n\t\t\tthis.isPlayMedia = false;\n\t\t\t(_a = this.getMediaElement()) === null || _a === void 0\n\t\t\t\t? void 0\n\t\t\t\t: _a.pause();\n\t\t});\n\t\tthis.on('animate', (e) => {\n\t\t\tconst mediaElement = this.getMediaElement();\n\t\t\tmediaElement.muted = false;\n\t\t\tconst time = e.time;\n\t\t\tconst isReversTime = prevTime > time;\n\t\t\tconst isRunning = this.getPlayState() === 'running';\n\t\t\tconst isReverse = this.getDirection().indexOf('reverse') > -1;\n\t\t\tconst isPlayMedia = this.isPlayMedia;\n\t\t\tconst frame = e.frames.media;\n\t\t\tconst playSpeed = mediaItem.getPlaySpeed();\n\t\t\tconst duration = this.getDuration();\n\t\t\tconst volume = this.getVolume();\n\t\t\tconst seek = frame.get('seek');\n\t\t\tprevTime = time;\n\t\t\tif (!isRunning || !isPlayMedia) {\n\t\t\t\tmediaElement.playbackRate = playSpeed * (isReverse ? -1 : 1);\n\t\t\t\tmediaElement.currentTime = seek;\n\t\t\t}\n\t\t\tif (isReversTime || time <= 0 || duration <= time) {\n\t\t\t\t// end play\n\t\t\t\tif (isRunning) {\n\t\t\t\t\tthis.isPlayMedia = false;\n\t\t\t\t\tmediaElement.pause();\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tmediaElement.volume = volume;\n\t\t\t\tif (!isPlayMedia && isRunning) {\n\t\t\t\t\tthis.isPlayMedia = true;\n\t\t\t\t\tconst result = mediaElement.play();\n\t\t\t\t\tif (result instanceof Promise) {\n\t\t\t\t\t\tresult.catch(() => {\n\t\t\t\t\t\t\tmediaElement.muted = true;\n\t\t\t\t\t\t\tmediaElement.play();\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n}\n","import { createContext, useEffect, useState } from 'react';\nimport Scene from 'scenejs';\n\nconst JsCanvasContext = createContext(null);\n\nexport { JsCanvasContext };\n","import Scene, { EASE_IN_OUT } from 'scenejs';\n\nconst JsCanvas = new Scene(\n\t{},\n\t{\n\t\teasing: EASE_IN_OUT,\n\t\titerationCount: 1,\n\t\tselector: true,\n\t}\n).setTime(0);\n\nexport { JsCanvas };\n","import React, { useContext, useEffect, useState } from 'react';\nimport PropTypes from 'prop-types';\nimport '../Canvas/Canvas.css';\nimport MediaScene from '../media';\nimport { JsCanvas } from '../jscanvas';\nimport { JsCanvasContext } from '../../util/useJsCanvas';\n\nconst AudioLayer = ({\n\tname,\n\tid,\n\taudio,\n\tvolume,\n\tplaySpeed,\n\tdelay,\n\tseekStart,\n\tseekEnd,\n}) => {\n\tconst jsCanvas = useContext(JsCanvasContext);\n\tuseEffect(() => {\n\t\tlet media = new MediaScene();\n\t\tlet theDuration = jsCanvas.getDuration();\n\t\tlet newMedia = media.addMedia(name + id, audio);\n\n\t\tnewMedia.setVolume(volume).setPlaySpeed(playSpeed).setDelay(delay);\n\n\t\tif (seekEnd > 0) {\n\t\t\tnewMedia.seek(seekStart, seekEnd);\n\t\t} else {\n\t\t\tnewMedia.seek(0, theDuration);\n\t\t}\n\t\tjsCanvas.setItem('media', newMedia);\n\t}, [seekStart, seekEnd]);\n\n\treturn <></>;\n};\n\nAudioLayer.defaultProps = {\n\tname: 'audio',\n\tid: 1,\n\taudio:\n\t\t'http://cld3097web.audiovideoweb.com/va90web25003/companions/Foundations%20of%20Rock/5.02.mp3',\n\tvolume: 1,\n\tplaySpeed: 1,\n\tdelay: 0,\n\tseekStart: 0,\n\tseekEnd: 0,\n};\n\nAudioLayer.propTypes = {\n\tname: PropTypes.string,\n\tid: PropTypes.number,\n\tvolume: PropTypes.number,\n\taudio: PropTypes.string,\n\tplaySpeed: PropTypes.number,\n\tdelay: PropTypes.number || PropTypes.string,\n\tseekStart: PropTypes.number,\n\tseekEnd: PropTypes.number,\n};\n\nexport { AudioLayer };\n","import { useEffect, useState } from 'react';\n\nfunction getWindowDimensions() {\n\tconst { innerWidth: width, innerHeight: height } =\n\t\ttypeof window !== 'undefined' ? window : {};\n\treturn {\n\t\twidth,\n\t\theight,\n\t};\n}\n\nexport default function useWindowDimensions(\n\tcanvasContentRef,\n\tmaxWidth,\n\tmaxHeight\n) {\n\tconst [windowDimensions, setWindowDimensions] = useState(\n\t\tgetWindowDimensions()\n\t);\n\n\tuseEffect(() => {\n\t\tfunction handleResize() {\n\t\t\tlet theRatio = {\n\t\t\t\theight: getWindowDimensions().height / (16 / 9),\n\t\t\t\twidth: getWindowDimensions().width / (16 / 9),\n\t\t\t};\n\n\t\t\ttheRatio.scale = Math.min(\n\t\t\t\ttheRatio.width / maxWidth,\n\t\t\t\ttheRatio.height / maxHeight\n\t\t\t);\n\t\t\tsetWindowDimensions(theRatio);\n\t\t}\n\n\t\thandleResize();\n\n\t\twindow.addEventListener('resize', handleResize);\n\t\treturn () => window.removeEventListener('resize', handleResize);\n\t}, []);\n\n\treturn windowDimensions;\n}\n","import React, { useContext, useEffect, useRef, useState } from 'react';\nimport PropTypes from 'prop-types';\nimport './Canvas.css';\nimport Scene from 'scenejs';\nimport useWindowDimensions from '../../util/useWindowDimensions';\nimport { JsCanvasContext } from '../../util/useJsCanvas';\n\nconst CanvasContainer = ({\n\tchildren,\n\twidth,\n\theight,\n\tjsCanva,\n\tautoPlay,\n\tcontrols,\n\tplaying,\n\tfullWidth,\n\tanimationDuration,\n\tinline,\n}) => {\n\tconst jsCanvas = useContext(JsCanvasContext);\n\tconst canvasRef = useRef(null);\n\tconst [isPlaying, setIsPlaying] = useState(false);\n\tconst [progress, setProgress] = useState(0);\n\n\tconst {\n\t\theight: windowHeight,\n\t\twidth: windowWidth,\n\t\tscale,\n\t} = useWindowDimensions(canvasRef, width, height);\n\n\tuseEffect(() => {\n\t\tlet duration = jsCanvas.getDuration();\n\t\tjsCanva(jsCanvas);\n\t\tanimationDuration(duration);\n\n\t\tif (autoPlay) {\n\t\t\tjsCanvas.play();\n\t\t\tsetIsPlaying(true);\n\t\t}\n\n\t\tjsCanvas.on('play', (e) => {\n\t\t\tsetIsPlaying(true);\n\t\t});\n\t\tjsCanvas.on('paused', (e) => {\n\t\t\tsetIsPlaying(false);\n\t\t});\n\t\tjsCanvas.on('animate', (e) => {\n\t\t\tsetProgress((100 * e.time) / duration);\n\t\t});\n\t\tplaying({\n\t\t\tplaying: isPlaying,\n\t\t\tprogress: progress,\n\t\t});\n\t}, [isPlaying, progress]);\n\n\treturn (\n\t\t<div id=\"canvasContainer\">\n\t\t\t<div\n\t\t\t\tclassName={inline ? '' : 'Canvas'}\n\t\t\t\tid=\"recorderCanvas\"\n\t\t\t\tref={canvasRef}\n\t\t\t>\n\t\t\t\t<div\n\t\t\t\t\tclassName=\"CanvasInner\"\n\t\t\t\t\tstyle={\n\t\t\t\t\t\tfullWidth\n\t\t\t\t\t\t\t? {\n\t\t\t\t\t\t\t\t\twidth: '100%',\n\t\t\t\t\t\t\t\t\theight: '100%',\n\t\t\t\t\t\t\t  }\n\t\t\t\t\t\t\t: {\n\t\t\t\t\t\t\t\t\twidth: windowWidth,\n\t\t\t\t\t\t\t\t\theight: windowHeight,\n\t\t\t\t\t\t\t  }\n\t\t\t\t\t}\n\t\t\t\t>\n\t\t\t\t\t<div\n\t\t\t\t\t\tid=\"Composition\"\n\t\t\t\t\t\tclassName=\"Composition\"\n\t\t\t\t\t\tstyle={\n\t\t\t\t\t\t\tfullWidth\n\t\t\t\t\t\t\t\t? {\n\t\t\t\t\t\t\t\t\t\twidth: width,\n\t\t\t\t\t\t\t\t\t\theight: height,\n\t\t\t\t\t\t\t\t  }\n\t\t\t\t\t\t\t\t: {\n\t\t\t\t\t\t\t\t\t\twidth: width,\n\t\t\t\t\t\t\t\t\t\theight: height,\n\t\t\t\t\t\t\t\t\t\ttransform: `translate(-50%, -50%) scale(${\n\t\t\t\t\t\t\t\t\t\t\tscale ? scale : 1\n\t\t\t\t\t\t\t\t\t\t})`,\n\t\t\t\t\t\t\t\t  }\n\t\t\t\t\t\t}\n\t\t\t\t\t>\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclassName=\"Layers\"\n\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\twidth: width,\n\t\t\t\t\t\t\t\theight: height,\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{children}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t{controls && (\n\t\t\t\t<div className={inline ? 'playerWrapperInline' : 'playerWrapper'}>\n\t\t\t\t\t<div\n\t\t\t\t\t\tclassName=\"player\"\n\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\twidth: windowWidth,\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclassName={`${isPlaying ? 'pause' : 'play'}`}\n\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\tjsCanvas.isPaused() ? jsCanvas.play() : jsCanvas.pause();\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\tclassName=\"progress\"\n\t\t\t\t\t\t\ttype=\"range\"\n\t\t\t\t\t\t\tonChange={(e) => {\n\t\t\t\t\t\t\t\tjsCanvas.pause();\n\t\t\t\t\t\t\t\tjsCanvas.setTime(e.target.value + '%');\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tvalue={progress.toString()}\n\t\t\t\t\t\t\tmin=\"0\"\n\t\t\t\t\t\t\tmax=\"100\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t)}\n\t\t</div>\n\t);\n};\n\nconst Canvas = ({\n\tchildren,\n\twidth,\n\theight,\n\tjsCanva,\n\tautoPlay,\n\tcontrols,\n\tplaying,\n\tfullWidth,\n\tanimationDuration,\n\tinline,\n}) => {\n\treturn (\n\t\t<JsCanvasContext.Provider\n\t\t\tvalue={new Scene(\n\t\t\t\t{},\n\t\t\t\t{\n\t\t\t\t\teasing: Scene.EASE_IN_OUT,\n\t\t\t\t\titerationCount: 1,\n\t\t\t\t\tselector: true,\n\t\t\t\t}\n\t\t\t).setTime(0)}\n\t\t>\n\t\t\t<CanvasContainer\n\t\t\t\theight={height}\n\t\t\t\twidth={width}\n\t\t\t\tautoPlay={autoPlay}\n\t\t\t\tcontrols={controls}\n\t\t\t\tplaying={playing}\n\t\t\t\tjsCanva={jsCanva}\n\t\t\t\tfullWidth={fullWidth}\n\t\t\t\tanimationDuration={animationDuration}\n\t\t\t\tinline={inline}\n\t\t\t>\n\t\t\t\t{children}\n\t\t\t</CanvasContainer>\n\t\t</JsCanvasContext.Provider>\n\t);\n};\n\nCanvas.defaultProps = {\n\twidth: 1920,\n\theight: 1080,\n\tchildren: [],\n\tautoPlay: false,\n\tcontrols: true,\n\tplaying: () => {},\n\tjsCanva: () => {},\n\tfullWidth: false,\n\tanimationDuration: () => {},\n\tinline: false,\n};\n\nCanvas.propTypes = {\n\twidth: PropTypes.number,\n\theight: PropTypes.number,\n\tchildren: PropTypes.any,\n\tautoPlay: PropTypes.bool,\n\tcontrols: PropTypes.bool,\n\tplaying: PropTypes.func,\n\tjsCanva: PropTypes.any,\n\tfullWidth: PropTypes.bool,\n\tanimationDuration: PropTypes.func,\n\tinline: PropTypes.bool,\n};\n\nexport { Canvas };\n"],"names":["Layer","_ref","children","name","id","ratio","keyframes","style","playSpeed","delay","iteration","jsCanvas","useContext","JsCanvasContext","baseName","replaceAll","useEffect","newItem","concat","selector","set","_objectSpread","options","React","createElement","data-testid","className","position","width","height","left","right","top","bottom","margin","css","insertAt","ref","document","head","getElementsByTagName","type","firstChild","insertBefore","appendChild","styleSheet","cssText","createTextNode","_super","createContext","Media","defaultProps","propTypes","PropTypes","string","number","object","layerStyle","any","_inherits","Scene","_Scene","_createSuper","_createClass","key","value","this","mediaItem","get","volume","setPlaySpeed","fromTime","toTime","setDuration","element","setElement","getElements","seek","getPlaySpeed","getVolume","getDelay","url","sourceElement","_this2","prevTime","newFrame","isString","audio","Audio","src","querySelector","on","e","_a","isPlayMedia","getMediaElement","pause","mediaElement","time","muted","isReversTime","isRunning","getPlayState","isReverse","getDirection","indexOf","frame","frames","media","duration","getDuration","playbackRate","currentTime","result","play","Promise","catch","MediaScene","setItem","info","medias","forEach","push","getInfo","_this","_classCallCheck","call","playInfos","init","easing","EASE_IN_OUT","iterationCount","setTime","AudioLayer","seekStart","seekEnd","theDuration","newMedia","addMedia","setVolume","setDelay","Fragment","getWindowDimensions","window","innerWidth","innerHeight","CanvasContainer","maxWidth","maxHeight","setWindowDimensions","jsCanva","autoPlay","controls","playing","fullWidth","animationDuration","inline","canvasRef","useRef","isPlaying","_useState2","_slicedToArray","useState","setIsPlaying","progress","_useState4","setProgress","windowDimensions","handleResize","theRatio","scale","Math","min","addEventListener","removeEventListener","windowHeight","windowWidth","transform","onClick","isPaused","onChange","target","toString","max","Canvas","_ref2","Provider","bool","func"],"mappings":"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"}