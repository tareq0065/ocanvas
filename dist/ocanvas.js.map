{"version":3,"file":"ocanvas.js","sources":["../src/components/Layer.js","../node_modules/style-inject/dist/style-inject.es.js","../util/useJsCanvas.js","../util/useWindowDimensions.js","../src/media/Media.js","../src/Canvas/Canvas.js","../src/media/index.js"],"sourcesContent":["import React, { useContext, useEffect } from 'react';\nimport PropTypes from 'prop-types';\nimport '../Canvas/Canvas.scss';\nimport { JsCanvasContext } from '../../util/useJsCanvas';\n\nconst Layer = ({\n\tchildren,\n\tname,\n\tid,\n\tratio,\n\tkeyframes,\n\tstyle,\n\tlayerStyle,\n\tplaySpeed,\n\tdelay,\n\tautoPlay,\n\titeration,\n}) => {\n\tconst jsCanvas = useContext(JsCanvasContext);\n\tconst baseName = name.replaceAll(' ', '_') + id;\n\n\tuseEffect(() => {\n\t\tconst newItem = jsCanvas.newItem(`.Layer-${baseName}`, {\n\t\t\tselector: true,\n\t\t\tdelay: delay,\n\t\t\tplaySpeed: playSpeed,\n\t\t});\n\t\tnewItem.set({\n\t\t\t...keyframes,\n\t\t\toptions: {\n\t\t\t\tdelay: delay,\n\t\t\t\titeration: iteration,\n\t\t\t\tplaySpeed: playSpeed,\n\t\t\t},\n\t\t});\n\t}, [name, keyframes, iteration]);\n\n\treturn (\n\t\t<div\n\t\t\tdata-testid={`Layer-${baseName}`}\n\t\t\tclassName={`Layer-${baseName}`}\n\t\t\tstyle={{\n\t\t\t\tposition: 'absolute',\n\t\t\t\twidth: ratio.width,\n\t\t\t\theight: ratio.height,\n\t\t\t\tleft: 0,\n\t\t\t\tright: 0,\n\t\t\t\ttop: 0,\n\t\t\t\tbottom: 0,\n\t\t\t\tmargin: 'auto',\n\t\t\t\t...style,\n\t\t\t}}\n\t\t>\n\t\t\t{children}\n\t\t</div>\n\t);\n};\n\nLayer.defaultProps = {\n\tname: 'animation',\n\tid: 1,\n\tratio: {\n\t\twidth: 1080,\n\t\theight: 720,\n\t},\n\tkeyframes: {},\n\tstyle: {},\n\tlayerStyle: {},\n\tplaySpeed: 1,\n\tdelay: 0,\n\tautoPlay: false,\n\tchildren: <div />,\n\titeration: 'infinite',\n};\n\nLayer.propTypes = {\n\tname: PropTypes.string,\n\tid: PropTypes.number,\n\tratio: PropTypes.object,\n\tkeyframes: PropTypes.object,\n\tstyle: PropTypes.object,\n\tlayerStyle: PropTypes.object,\n\tplaySpeed: PropTypes.number,\n\tdelay: PropTypes.number || PropTypes.string,\n\tautoPlay: PropTypes.bool,\n\tchildren: PropTypes.any,\n\titeration: PropTypes.any,\n};\n\nexport { Layer };\n","function styleInject(css, ref) {\n  if ( ref === void 0 ) ref = {};\n  var insertAt = ref.insertAt;\n\n  if (!css || typeof document === 'undefined') { return; }\n\n  var head = document.head || document.getElementsByTagName('head')[0];\n  var style = document.createElement('style');\n  style.type = 'text/css';\n\n  if (insertAt === 'top') {\n    if (head.firstChild) {\n      head.insertBefore(style, head.firstChild);\n    } else {\n      head.appendChild(style);\n    }\n  } else {\n    head.appendChild(style);\n  }\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nexport default styleInject;\n","import { createContext, useEffect, useState } from 'react';\nimport Scene from 'scenejs';\n\nconst JsCanvasContext = createContext(null);\nconst JsCanvasMediaContext = createContext(null);\n\nexport { JsCanvasContext, JsCanvasMediaContext };\n","import { useEffect, useState } from 'react';\n\nfunction getWindowDimensions() {\n\tconst { innerWidth: width, innerHeight: height } =\n\t\ttypeof window !== 'undefined' ? window : {};\n\treturn {\n\t\twidth,\n\t\theight,\n\t};\n}\n\nexport default function useWindowDimensions(\n\tcanvasContentRef,\n\tmaxWidth,\n\tmaxHeight\n) {\n\tconst [windowDimensions, setWindowDimensions] = useState(\n\t\tgetWindowDimensions()\n\t);\n\n\tuseEffect(() => {\n\t\tfunction handleResize() {\n\t\t\tlet theRatio = {\n\t\t\t\theight: getWindowDimensions().height / (16 / 9),\n\t\t\t\twidth: getWindowDimensions().width / (16 / 9),\n\t\t\t};\n\n\t\t\ttheRatio.scale = Math.min(\n\t\t\t\ttheRatio.width / maxWidth,\n\t\t\t\ttheRatio.height / maxHeight\n\t\t\t);\n\t\t\tsetWindowDimensions(theRatio);\n\t\t}\n\n\t\thandleResize();\n\n\t\twindow.addEventListener('resize', handleResize);\n\t\treturn () => window.removeEventListener('resize', handleResize);\n\t}, []);\n\n\treturn windowDimensions;\n}\n","import Scene from 'scenejs';\nimport { isString } from '@daybrush/utils';\nimport MediaScene from './index';\nexport default class Media extends Scene {\n\tconstructor(url) {\n\t\tsuper();\n\t\tthis.isPlayMedia = true;\n\t\tthis.init(url);\n\t}\n\tgetMediaItem() {\n\t\treturn this.mediaItem;\n\t}\n\tgetVolume() {\n\t\treturn this.mediaItem.get(0, 'volume');\n\t}\n\tsetVolume(volume) {\n\t\tthis.mediaItem.set(0, 'volume', volume);\n\t\treturn this;\n\t}\n\tsetPlaySpeed(playSpeed) {\n\t\tthis.mediaItem.setPlaySpeed(playSpeed);\n\t\treturn this;\n\t}\n\tseek(fromTime, toTime) {\n\t\tconst mediaItem = this.mediaItem;\n\t\tmediaItem.set(0, 'seek', fromTime);\n\t\tmediaItem.set('100%', 'seek', toTime);\n\t\tmediaItem.setDuration(toTime - fromTime);\n\t\treturn this;\n\t}\n\tsetElement(element) {\n\t\tthis.mediaItem.setElement(element);\n\t\treturn this;\n\t}\n\tgetMediaElement() {\n\t\treturn this.mediaItem.getElements()[0];\n\t}\n\tgetInfo() {\n\t\tconst mediaItem = this.mediaItem;\n\t\tconst seek = [mediaItem.get(0, 'seek'), mediaItem.get('100%', 'seek')];\n\t\tconst playSpeed = mediaItem.getPlaySpeed();\n\t\tconst volume = this.getVolume();\n\t\tconst delay = this.getDelay();\n\t\tconst info = {\n\t\t\turl: this.url,\n\t\t\tseek,\n\t\t\tplaySpeed,\n\t\t\tdelay,\n\t\t\tvolume,\n\t\t};\n\t\treturn info;\n\t}\n\tinit(url) {\n\t\tconst mediaItem = this.newItem('media');\n\t\tconsole.log('mediaItem:', mediaItem);\n\t\tmediaItem.newFrame(0);\n\t\tmediaItem.newFrame(1);\n\t\tmediaItem.set(0, 'volume', 1);\n\t\tmediaItem.set(0, 'seek', 0);\n\t\tmediaItem.set('100%', 'seek', 0);\n\t\tconsole.log('mediaItemafter:', mediaItem);\n\t\tthis.mediaItem = mediaItem;\n\t\tif (isString(url)) {\n\t\t\tconst audio = new Audio();\n\t\t\taudio.src = url;\n\t\t\tthis.setElement(audio);\n\t\t\tthis.url = url;\n\t\t} else {\n\t\t\tif (url.src) {\n\t\t\t\tthis.url = url.src;\n\t\t\t} else {\n\t\t\t\tconst sourceElement = url.querySelector('[src]');\n\t\t\t\tthis.url = sourceElement ? sourceElement.src : '';\n\t\t\t}\n\t\t\tthis.setElement(url);\n\t\t}\n\t\tlet prevTime = 0;\n\t\tthis.on('paused', (e) => {\n\t\t\tvar _a;\n\t\t\tthis.isPlayMedia = false;\n\t\t\t(_a = this.getMediaElement()) === null || _a === void 0\n\t\t\t\t? void 0\n\t\t\t\t: _a.pause();\n\t\t});\n\t\tthis.on('animate', (e) => {\n\t\t\tconst mediaElement = this.getMediaElement();\n\t\t\tmediaElement.muted = false;\n\t\t\tconst time = e.time;\n\t\t\tconst isReversTime = prevTime > time;\n\t\t\tconst isRunning = this.getPlayState() === 'running';\n\t\t\tconst isReverse = this.getDirection().indexOf('reverse') > -1;\n\t\t\tconst isPlayMedia = this.isPlayMedia;\n\t\t\tconst frame = e.frames.media;\n\t\t\tconst playSpeed = mediaItem.getPlaySpeed();\n\t\t\tconst duration = this.getDuration();\n\t\t\tconst volume = this.getVolume();\n\t\t\tconst seek = frame.get('seek');\n\t\t\tprevTime = time;\n\t\t\tif (!isRunning || !isPlayMedia) {\n\t\t\t\tmediaElement.playbackRate = playSpeed * (isReverse ? -1 : 1);\n\t\t\t\tmediaElement.currentTime = seek;\n\t\t\t}\n\t\t\tif (isReversTime || time <= 0 || duration <= time) {\n\t\t\t\t// end play\n\t\t\t\tif (isRunning) {\n\t\t\t\t\tthis.isPlayMedia = false;\n\t\t\t\t\tmediaElement.pause();\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tmediaElement.volume = volume;\n\t\t\t\tif (!isPlayMedia && isRunning) {\n\t\t\t\t\tthis.isPlayMedia = true;\n\t\t\t\t\tconst result = mediaElement.play();\n\t\t\t\t\tif (result instanceof Promise) {\n\t\t\t\t\t\tresult.catch(() => {\n\t\t\t\t\t\t\tmediaElement.muted = true;\n\t\t\t\t\t\t\tmediaElement.play();\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n}\n","import React, { useContext, useEffect, useRef, useState } from 'react';\nimport PropTypes from 'prop-types';\nimport './Canvas.scss';\nimport useWindowDimensions from '../../util/useWindowDimensions';\nimport Scene from 'scenejs';\nimport { JsCanvasContext, JsCanvasMediaContext } from '../../util/useJsCanvas';\nimport MediaScene from '../media';\n\nconst CanvasContainer = ({\n\tchildren,\n\twidth,\n\theight,\n\tjsCanva,\n\tautoPlay,\n\tcontrols,\n\tfullWidth,\n\tanimationDuration,\n}) => {\n\tconst jsCanvas = useContext(JsCanvasContext);\n\tconst canvasRef = useRef(null);\n\tconst [isPlaying, setIsPlaying] = useState(false);\n\tconst [progress, setProgress] = useState(0);\n\tconst {\n\t\theight: windowHeight,\n\t\twidth: windowWidth,\n\t\tscale,\n\t} = useWindowDimensions(canvasRef, width, height);\n\n\tuseEffect(() => {\n\t\tlet duration = jsCanvas.getDuration();\n\t\tjsCanva(jsCanvas);\n\t\tanimationDuration(duration);\n\n\t\tif (autoPlay) {\n\t\t\tjsCanvas.play();\n\t\t\tsetIsPlaying(true);\n\t\t}\n\n\t\tjsCanvas.on('play', (e) => {\n\t\t\tsetIsPlaying(true);\n\t\t});\n\t\tjsCanvas.on('paused', (e) => {\n\t\t\tsetIsPlaying(false);\n\t\t});\n\t\tjsCanvas.on('animate', (e) => {\n\t\t\tsetProgress((100 * e.time) / duration);\n\t\t});\n\t}, []);\n\n\treturn (\n\t\t<div id=\"canvasContainer\">\n\t\t\t<div className=\"Canvas\" id=\"recorderCanvas\" ref={canvasRef}>\n\t\t\t\t<div\n\t\t\t\t\tclassName=\"CanvasInner\"\n\t\t\t\t\tstyle={\n\t\t\t\t\t\tfullWidth\n\t\t\t\t\t\t\t? {\n\t\t\t\t\t\t\t\t\twidth: '100%',\n\t\t\t\t\t\t\t\t\theight: '100%',\n\t\t\t\t\t\t\t  }\n\t\t\t\t\t\t\t: {\n\t\t\t\t\t\t\t\t\twidth: windowWidth,\n\t\t\t\t\t\t\t\t\theight: windowHeight,\n\t\t\t\t\t\t\t  }\n\t\t\t\t\t}\n\t\t\t\t>\n\t\t\t\t\t<div\n\t\t\t\t\t\tid=\"Composition\"\n\t\t\t\t\t\tclassName=\"Composition\"\n\t\t\t\t\t\tstyle={\n\t\t\t\t\t\t\tfullWidth\n\t\t\t\t\t\t\t\t? {\n\t\t\t\t\t\t\t\t\t\twidth: width,\n\t\t\t\t\t\t\t\t\t\theight: height,\n\t\t\t\t\t\t\t\t  }\n\t\t\t\t\t\t\t\t: {\n\t\t\t\t\t\t\t\t\t\twidth: width,\n\t\t\t\t\t\t\t\t\t\theight: height,\n\t\t\t\t\t\t\t\t\t\ttransform: `translate(-50%, -50%) scale(${\n\t\t\t\t\t\t\t\t\t\t\tscale ? scale : 1\n\t\t\t\t\t\t\t\t\t\t})`,\n\t\t\t\t\t\t\t\t  }\n\t\t\t\t\t\t}\n\t\t\t\t\t>\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclassName=\"Layers\"\n\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\twidth: width,\n\t\t\t\t\t\t\t\theight: height,\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{children}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t{controls && (\n\t\t\t\t<div className=\"playerWrapper\">\n\t\t\t\t\t<div\n\t\t\t\t\t\tclassName=\"player\"\n\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\twidth: windowWidth,\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclassName={`${isPlaying ? 'pause' : 'play'}`}\n\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\tjsCanvas.isPaused() ? jsCanvas.play() : jsCanvas.pause();\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\tclassName=\"progress\"\n\t\t\t\t\t\t\ttype=\"range\"\n\t\t\t\t\t\t\tonChange={(e) => {\n\t\t\t\t\t\t\t\tjsCanvas.pause();\n\t\t\t\t\t\t\t\tjsCanvas.setTime(e.target.value + '%');\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tvalue={progress.toString()}\n\t\t\t\t\t\t\tmin=\"0\"\n\t\t\t\t\t\t\tmax=\"100\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t)}\n\t\t</div>\n\t);\n};\n\nconst Canvas = ({\n\tchildren,\n\twidth,\n\theight,\n\tjsCanva,\n\tautoPlay,\n\tcontrols,\n\tfullWidth,\n\tanimationDuration,\n}) => {\n\treturn (\n\t\t<JsCanvasContext.Provider\n\t\t\tvalue={new Scene(\n\t\t\t\t{},\n\t\t\t\t{\n\t\t\t\t\teasing: Scene.EASE_IN_OUT,\n\t\t\t\t\titerationCount: 1,\n\t\t\t\t\tselector: true,\n\t\t\t\t}\n\t\t\t).setTime(0)}\n\t\t>\n\t\t\t<JsCanvasMediaContext.Provider value={new MediaScene()}>\n\t\t\t\t<CanvasContainer\n\t\t\t\t\theight={height}\n\t\t\t\t\twidth={width}\n\t\t\t\t\tautoPlay={autoPlay}\n\t\t\t\t\tcontrols={controls}\n\t\t\t\t\tjsCanva={jsCanva}\n\t\t\t\t\tfullWidth={fullWidth}\n\t\t\t\t\tanimationDuration={animationDuration}\n\t\t\t\t>\n\t\t\t\t\t{children}\n\t\t\t\t</CanvasContainer>\n\t\t\t</JsCanvasMediaContext.Provider>\n\t\t</JsCanvasContext.Provider>\n\t);\n};\n\nCanvas.defaultProps = {\n\twidth: 1920,\n\theight: 1080,\n\tchildren: [],\n\tautoPlay: false,\n\tcontrols: true,\n\tjsCanva: () => {},\n\tfullWidth: false,\n\tanimationDuration: () => {},\n};\n\nCanvas.propTypes = {\n\twidth: PropTypes.number,\n\theight: PropTypes.number,\n\tchildren: PropTypes.any,\n\tautoPlay: PropTypes.bool,\n\tcontrols: PropTypes.bool,\n\tjsCanva: PropTypes.any,\n\tfullWidth: PropTypes.bool,\n\tanimationDuration: PropTypes.func,\n};\n\nexport { Canvas };\n","import NativeScene from 'scenejs';\nimport Media from './Media';\nexport default class MediaScene extends NativeScene {\n\tconstructor() {\n\t\tsuper();\n\t\tthis.playInfos = {};\n\t}\n\t/**\n\t * add video or audio mediaInfo\n\t * @param id\n\t * @param url\n\t */\n\taddMedia(id, url = id) {\n\t\tconst media = new Media(url);\n\t\tthis.setItem(id, media);\n\t\treturn media;\n\t}\n\tgetInfo() {\n\t\tconst info = {\n\t\t\tduration: 0,\n\t\t\tmedias: [],\n\t\t};\n\t\tthis.forEach((media) => {\n\t\t\tinfo.medias.push(media.getInfo());\n\t\t});\n\t\tinfo.duration = this.getDuration();\n\t\treturn info;\n\t}\n}\n"],"names":["Layer","_ref","children","name","id","ratio","keyframes","style","playSpeed","layerStyle","delay","iteration","autoPlay","jsCanvas","useContext","JsCanvasContext","baseName","replaceAll","useEffect","newItem","concat","selector","set","_objectSpread","options","React","createElement","data-testid","className","position","width","height","left","right","top","bottom","margin","css","insertAt","ref","document","head","getElementsByTagName","type","firstChild","insertBefore","appendChild","styleSheet","cssText","createTextNode","createContext","JsCanvasMediaContext","getWindowDimensions","window","innerWidth","innerHeight","defaultProps","propTypes","PropTypes","string","number","object","bool","any","CanvasContainer","maxWidth","maxHeight","setWindowDimensions","jsCanva","controls","fullWidth","animationDuration","canvasRef","useRef","_useState2","isPlaying","_slicedToArray","useState","setIsPlaying","progress","_useState4","setProgress","windowDimensions","handleResize","theRatio","scale","Math","min","addEventListener","removeEventListener","windowHeight","windowWidth","duration","getDuration","play","on","e","time","transform","onClick","isPaused","pause","onChange","setTime","target","value","toString","max","Canvas","_ref2","Provider","Scene","easing","EASE_IN_OUT","iterationCount","MediaScene","_inherits","Media","_Scene","_super","_createSuper","_createClass","key","this","mediaItem","get","volume","setPlaySpeed","fromTime","toTime","setDuration","element","setElement","getElements","seek","getPlaySpeed","getVolume","getDelay","url","sourceElement","_this2","prevTime","console","log","newFrame","isString","audio","Audio","src","querySelector","_a","isPlayMedia","getMediaElement","mediaElement","muted","isReversTime","isRunning","getPlayState","isReverse","getDirection","indexOf","frame","frames","media","playbackRate","currentTime","result","Promise","catch","NativeScene","setItem","info","medias","forEach","push","getInfo","_this","_classCallCheck","call","playInfos","init","func"],"mappings":"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"}